/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./resources/assets/core/plugins/custom/jkanban/jkanban.js":
/*!*****************************************************************!*\
  !*** ./resources/assets/core/plugins/custom/jkanban/jkanban.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("// jKanban Board - Vanilla Javascript plugin for manage kanban boards: https://github.com/riktar/jkanban\n__webpack_require__(/*! jkanban/dist/jkanban.js */ \"./node_modules/jkanban/dist/jkanban.js\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9yZXNvdXJjZXMvYXNzZXRzL2NvcmUvcGx1Z2lucy9jdXN0b20vamthbmJhbi9qa2FuYmFuLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBRUFBLG1CQUFPLENBQUMsdUVBQUQsQ0FBUCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3Jlc291cmNlcy9hc3NldHMvY29yZS9wbHVnaW5zL2N1c3RvbS9qa2FuYmFuL2prYW5iYW4uanM/NzNkNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBqS2FuYmFuIEJvYXJkIC0gVmFuaWxsYSBKYXZhc2NyaXB0IHBsdWdpbiBmb3IgbWFuYWdlIGthbmJhbiBib2FyZHM6IGh0dHBzOi8vZ2l0aHViLmNvbS9yaWt0YXIvamthbmJhblxyXG5cclxucmVxdWlyZSgnamthbmJhbi9kaXN0L2prYW5iYW4uanMnKTtcclxuIl0sIm5hbWVzIjpbInJlcXVpcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./resources/assets/core/plugins/custom/jkanban/jkanban.js\n");

/***/ }),

/***/ "./node_modules/jkanban/dist/jkanban.js":
/*!**********************************************!*\
  !*** ./node_modules/jkanban/dist/jkanban.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=undefined;if(!f&&c)return require(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=undefined,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\n/**\r\n * jKanban\r\n * Vanilla Javascript plugin for manage kanban boards\r\n *\r\n * @site: http://www.riccardotartaglia.it/jkanban/\r\n * @author: Riccardo Tartaglia\r\n */\r\n\r\n//Require dragula\r\nvar dragula = require('dragula');\r\n\r\n(function () {\r\n  this.jKanban = function () {\r\n    var self = this\r\n    var __DEFAULT_ITEM_HANDLE_OPTIONS = {\r\n      enabled: false\r\n    }\r\n    var __DEFAULT_ITEM_ADD_OPTIONS = {\r\n      enabled: false\r\n    }\r\n    this._disallowedItemProperties = [\r\n      'id',\r\n      'title',\r\n      'click',\r\n      'drag',\r\n      'dragend',\r\n      'drop',\r\n      'order'\r\n    ]\r\n    this.element = ''\r\n    this.container = ''\r\n    this.boardContainer = []\r\n    this.handlers = []\r\n    this.dragula = dragula\r\n    this.drake = ''\r\n    this.drakeBoard = ''\r\n    this.itemAddOptions = __DEFAULT_ITEM_ADD_OPTIONS\r\n    this.itemHandleOptions = __DEFAULT_ITEM_HANDLE_OPTIONS\r\n    var defaults = {\r\n      element: '',\r\n      gutter: '15px',\r\n      widthBoard: '250px',\r\n      responsive: '700',\r\n      responsivePercentage: false,\r\n      boards: [],\r\n      dragBoards: true,\r\n      dragItems: true, //whether can drag cards or not, useful when set permissions on it.\r\n      itemAddOptions: __DEFAULT_ITEM_ADD_OPTIONS,\r\n      itemHandleOptions: __DEFAULT_ITEM_HANDLE_OPTIONS,\r\n      dragEl: function (el, source) {},\r\n      dragendEl: function (el) {},\r\n      dropEl: function (el, target, source, sibling) {},\r\n      dragBoard: function (el, source) {},\r\n      dragendBoard: function (el) {},\r\n      dropBoard: function (el, target, source, sibling) {},\r\n      click: function (el) {},\r\n      buttonClick: function (el, boardId) {}\r\n    }\r\n\r\n    if (arguments[0] && typeof arguments[0] === 'object') {\r\n      this.options = __extendDefaults(defaults, arguments[0])\r\n    }\r\n\r\n    this.__getCanMove = function (handle) {\r\n      if (!self.options.itemHandleOptions.enabled) {\r\n        return !!self.options.dragItems\r\n      }\r\n\r\n      if (self.options.itemHandleOptions.handleClass) {\r\n        return handle.classList.contains(self.options.itemHandleOptions.handleClass)\r\n      }\r\n\r\n      return handle.classList.contains('item_handle')\r\n    }\r\n\r\n    this.init = function () {\r\n      //set initial boards\r\n      __setBoard()\r\n      //set drag with dragula\r\n      if (window.innerWidth > self.options.responsive) {\r\n        //Init Drag Board\r\n        self.drakeBoard = self\r\n          .dragula([self.container], {\r\n            moves: function (el, source, handle, sibling) {\r\n              if (!self.options.dragBoards) return false\r\n              return (\r\n                handle.classList.contains('kanban-board-header') ||\r\n                handle.classList.contains('kanban-title-board')\r\n              )\r\n            },\r\n            accepts: function (el, target, source, sibling) {\r\n              return target.classList.contains('kanban-container')\r\n            },\r\n            revertOnSpill: true,\r\n            direction: 'horizontal'\r\n          })\r\n          .on('drag', function (el, source) {\r\n            el.classList.add('is-moving')\r\n            self.options.dragBoard(el, source)\r\n            if (typeof el.dragfn === 'function') el.dragfn(el, source)\r\n          })\r\n          .on('dragend', function (el) {\r\n            __updateBoardsOrder()\r\n            el.classList.remove('is-moving')\r\n            self.options.dragendBoard(el)\r\n            if (typeof el.dragendfn === 'function') el.dragendfn(el)\r\n          })\r\n          .on('drop', function (el, target, source, sibling) {\r\n            el.classList.remove('is-moving')\r\n            self.options.dropBoard(el, target, source, sibling)\r\n            if (typeof el.dropfn === 'function')\r\n              el.dropfn(el, target, source, sibling)\r\n          })\r\n\r\n        //Init Drag Item\r\n        self.drake = self\r\n          .dragula(self.boardContainer, {\r\n            moves: function (el, source, handle, sibling) {\r\n              return self.__getCanMove(handle)\r\n            },\r\n            revertOnSpill: true\r\n          })\r\n          .on('cancel', function (el, container, source) {\r\n            self.enableAllBoards()\r\n          })\r\n          .on('drag', function (el, source) {\r\n            var elClass = el.getAttribute('class')\r\n            if (elClass !== '' && elClass.indexOf('not-draggable') > -1) {\r\n              self.drake.cancel(true)\r\n              return\r\n            }\r\n\r\n            el.classList.add('is-moving')\r\n\r\n            self.options.dragEl(el, source)\r\n\r\n            var boardJSON = __findBoardJSON(source.parentNode.dataset.id)\r\n            if (boardJSON.dragTo !== undefined) {\r\n              self.options.boards.map(function (board) {\r\n                if (\r\n                  boardJSON.dragTo.indexOf(board.id) === -1 &&\r\n                  board.id !== source.parentNode.dataset.id\r\n                ) {\r\n                  self.findBoard(board.id).classList.add('disabled-board')\r\n                }\r\n              })\r\n            }\r\n\r\n            if (el !== null && typeof el.dragfn === 'function')\r\n              el.dragfn(el, source)\r\n          })\r\n          .on('dragend', function (el) {\r\n            self.options.dragendEl(el)\r\n            if (el !== null && typeof el.dragendfn === 'function')\r\n              el.dragendfn(el)\r\n          })\r\n          .on('drop', function (el, target, source, sibling) {\r\n            self.enableAllBoards()\r\n\r\n            var boardJSON = __findBoardJSON(source.parentNode.dataset.id)\r\n            if (boardJSON.dragTo !== undefined) {\r\n              if (\r\n                boardJSON.dragTo.indexOf(target.parentNode.dataset.id) === -1 &&\r\n                target.parentNode.dataset.id !== source.parentNode.dataset.id\r\n              ) {\r\n                self.drake.cancel(true)\r\n              }\r\n            }\r\n            if (el !== null) {\r\n              var result = self.options.dropEl(el, target, source, sibling)\r\n              if (result === false) {\r\n                self.drake.cancel(true)\r\n              }\r\n              el.classList.remove('is-moving')\r\n              if (typeof el.dropfn === 'function')\r\n                el.dropfn(el, target, source, sibling)\r\n            }\r\n          })\r\n      }\r\n    }\r\n\r\n    this.enableAllBoards = function () {\r\n      var allB = document.querySelectorAll('.kanban-board')\r\n      if (allB.length > 0 && allB !== undefined) {\r\n        for (var i = 0; i < allB.length; i++) {\r\n          allB[i].classList.remove('disabled-board')\r\n        }\r\n      }\r\n    }\r\n\r\n    this.addElement = function (boardID, element) {\r\n      var board = self.element.querySelector(\r\n        '[data-id=\"' + boardID + '\"] .kanban-drag'\r\n      )\r\n      var nodeItem = document.createElement('div')\r\n      nodeItem.classList.add('kanban-item')\r\n      if (typeof element.id !== 'undefined' && element.id !== '') {\r\n        nodeItem.setAttribute('data-eid', element.id)\r\n      }\r\n      if (element.class && Array.isArray(element.class)) {\r\n        element.class.forEach(function (cl) {\r\n          nodeItem.classList.add(cl)\r\n        })\r\n      }\r\n      nodeItem.innerHTML = __buildItemTitle(element.title)\r\n      //add function\r\n      nodeItem.clickfn = element.click\r\n      nodeItem.dragfn = element.drag\r\n      nodeItem.dragendfn = element.dragend\r\n      nodeItem.dropfn = element.drop\r\n      __appendCustomProperties(nodeItem, element)\r\n      __onclickHandler(nodeItem)\r\n      if (self.options.itemHandleOptions.enabled) {\r\n        nodeItem.style.cursor = 'default'\r\n      }\r\n      board.appendChild(nodeItem)\r\n      return self\r\n    }\r\n\r\n    this.addForm = function (boardID, formItem) {\r\n      var board = self.element.querySelector(\r\n        '[data-id=\"' + boardID + '\"] .kanban-drag'\r\n      )\r\n      var _attribute = formItem.getAttribute('class')\r\n      formItem.setAttribute('class', _attribute + ' not-draggable')\r\n      board.appendChild(formItem)\r\n      return self\r\n    }\r\n\r\n    this.addBoards = function (boards, isInit) {\r\n      if (self.options.responsivePercentage) {\r\n        self.container.style.width = '100%'\r\n        self.options.gutter = '1%'\r\n        if (window.innerWidth > self.options.responsive) {\r\n          var boardWidth = (100 - boards.length * 2) / boards.length\r\n        } else {\r\n          var boardWidth = 100 - boards.length * 2\r\n        }\r\n      } else {\r\n        var boardWidth = self.options.widthBoard\r\n      }\r\n      var addButton = self.options.itemAddOptions.enabled\r\n      var buttonContent = self.options.itemAddOptions.content\r\n      var buttonClass = self.options.itemAddOptions.class\r\n      var buttonFooter = self.options.itemAddOptions.footer\r\n\r\n      //for on all the boards\r\n      for (var boardkey in boards) {\r\n        // single board\r\n        var board = boards[boardkey]\r\n        if (!isInit) {\r\n          self.options.boards.push(board)\r\n        }\r\n\r\n        if (!self.options.responsivePercentage) {\r\n          //add width to container\r\n          if (self.container.style.width === '') {\r\n            self.container.style.width =\r\n              parseInt(boardWidth) + parseInt(self.options.gutter) * 2 + 'px'\r\n          } else {\r\n            self.container.style.width =\r\n              parseInt(self.container.style.width) +\r\n              parseInt(boardWidth) +\r\n              parseInt(self.options.gutter) * 2 +\r\n              'px'\r\n          }\r\n        }\r\n        //create node\r\n        var boardNode = document.createElement('div')\r\n        boardNode.dataset.id = board.id\r\n        boardNode.dataset.order = self.container.childNodes.length + 1\r\n        boardNode.classList.add('kanban-board')\r\n        //set style\r\n        if (self.options.responsivePercentage) {\r\n          boardNode.style.width = boardWidth + '%'\r\n        } else {\r\n          boardNode.style.width = boardWidth\r\n        }\r\n        boardNode.style.marginLeft = self.options.gutter\r\n        boardNode.style.marginRight = self.options.gutter\r\n        // header board\r\n        var headerBoard = document.createElement('header')\r\n        if (board.class !== '' && board.class !== undefined)\r\n          var allClasses = board.class.split(',')\r\n        else allClasses = []\r\n        headerBoard.classList.add('kanban-board-header')\r\n        allClasses.map(function (value) {\r\n          // Remove empty spaces\r\n          value = value.replace(/^[ ]+/g, '')\r\n          headerBoard.classList.add(value)\r\n        })\r\n        headerBoard.innerHTML =\r\n          '<div class=\"kanban-title-board\">' + board.title + '</div>'\r\n        //content board\r\n        var contentBoard = document.createElement('main')\r\n        contentBoard.classList.add('kanban-drag')\r\n        if (board.bodyClass !== '' && board.bodyClass !== undefined)\r\n          var bodyClasses = board.bodyClass.split(',')\r\n        else bodyClasses = []\r\n        bodyClasses.map(function (value) {\r\n          contentBoard.classList.add(value)\r\n        })\r\n        //add drag to array for dragula\r\n        self.boardContainer.push(contentBoard)\r\n        for (var itemkey in board.item) {\r\n          //create item\r\n          var itemKanban = board.item[itemkey]\r\n          var nodeItem = document.createElement('div')\r\n          nodeItem.classList.add('kanban-item')\r\n          if (itemKanban.id) {\r\n            nodeItem.dataset.eid = itemKanban.id\r\n          }\r\n          if (itemKanban.class && Array.isArray(itemKanban.class)) {\r\n            itemKanban.class.forEach(function (cl) {\r\n              nodeItem.classList.add(cl)\r\n            })\r\n          }\r\n          nodeItem.innerHTML = __buildItemTitle(itemKanban.title)\r\n          //add function\r\n          nodeItem.clickfn = itemKanban.click\r\n          nodeItem.dragfn = itemKanban.drag\r\n          nodeItem.dragendfn = itemKanban.dragend\r\n          nodeItem.dropfn = itemKanban.drop\r\n          __appendCustomProperties(nodeItem, itemKanban)\r\n          //add click handler of item\r\n          __onclickHandler(nodeItem)\r\n          if (self.options.itemHandleOptions.enabled) {\r\n            nodeItem.style.cursor = 'default'\r\n          }\r\n          contentBoard.appendChild(nodeItem)\r\n        }\r\n        //footer board\r\n        var footerBoard = document.createElement('footer')\r\n        // if add button is true, add button to the board\r\n        if (addButton) {\r\n          var btn = document.createElement('BUTTON')\r\n          var t = document.createTextNode(buttonContent ? buttonContent : '+')\r\n          btn.setAttribute(\r\n            'class',\r\n            buttonClass ? buttonClass : 'kanban-title-button btn btn-default btn-xs'\r\n          )\r\n          btn.appendChild(t)\r\n          //var buttonHtml = '<button class=\"kanban-title-button btn btn-default btn-xs\">'+buttonContent+'</button>'\r\n          if (buttonFooter) {\r\n            footerBoard.appendChild(btn)\r\n          } else {\r\n            headerBoard.appendChild(btn)\r\n          }\r\n          __onButtonClickHandler(btn, board.id)\r\n        }\r\n        //board assembly\r\n        boardNode.appendChild(headerBoard)\r\n        boardNode.appendChild(contentBoard)\r\n        boardNode.appendChild(footerBoard)\r\n        //board add\r\n        self.container.appendChild(boardNode)\r\n      }\r\n      return self\r\n    }\r\n\r\n    this.findBoard = function (id) {\r\n      var el = self.element.querySelector('[data-id=\"' + id + '\"]')\r\n      return el\r\n    }\r\n\r\n    this.getParentBoardID = function (el) {\r\n      if (typeof el === 'string') {\r\n        el = self.element.querySelector('[data-eid=\"' + el + '\"]')\r\n      }\r\n      if (el === null) {\r\n        return null\r\n      }\r\n      return el.parentNode.parentNode.dataset.id\r\n    }\r\n\r\n    this.moveElement = function (targetBoardID, elementID, element) {\r\n      if (targetBoardID === this.getParentBoardID(elementID)) {\r\n        return\r\n      }\r\n\r\n      this.removeElement(elementID)\r\n      return this.addElement(targetBoardID, element)\r\n    }\r\n\r\n    this.replaceElement = function (el, element) {\r\n      var nodeItem = el\r\n      if (typeof nodeItem === 'string') {\r\n        nodeItem = self.element.querySelector('[data-eid=\"' + el + '\"]')\r\n      }\r\n      nodeItem.innerHTML = element.title\r\n      // add function\r\n      nodeItem.clickfn = element.click\r\n      nodeItem.dragfn = element.drag\r\n      nodeItem.dragendfn = element.dragend\r\n      nodeItem.dropfn = element.drop\r\n      __appendCustomProperties(nodeItem, element)\r\n      return self\r\n    }\r\n\r\n    this.findElement = function (id) {\r\n      var el = self.element.querySelector('[data-eid=\"' + id + '\"]')\r\n      return el\r\n    }\r\n\r\n    this.getBoardElements = function (id) {\r\n      var board = self.element.querySelector(\r\n        '[data-id=\"' + id + '\"] .kanban-drag'\r\n      )\r\n      return board.childNodes\r\n    }\r\n\r\n    this.removeElement = function (el) {\r\n      if (typeof el === 'string')\r\n        el = self.element.querySelector('[data-eid=\"' + el + '\"]')\r\n      if (el !== null) {\r\n        //fallback for IE\r\n        if (typeof el.remove == 'function') {\r\n          el.remove()\r\n        } else {\r\n          el.parentNode.removeChild(el)\r\n        }\r\n      }\r\n      return self\r\n    }\r\n\r\n    this.removeBoard = function (board) {\r\n      var boardElement = null\r\n      if (typeof board === 'string')\r\n        boardElement = self.element.querySelector('[data-id=\"' + board + '\"]')\r\n      if (boardElement !== null) {\r\n        //fallback for IE\r\n        if (typeof boardElement.remove == 'function') {\r\n          boardElement.remove()\r\n        } else {\r\n          boardElement.parentNode.removeChild(boardElement)\r\n        }\r\n      }\r\n\r\n      // remove thboard in options.boards\r\n      for (var i = 0; i < self.options.boards.length; i++) {\r\n        if (self.options.boards[i].id === board) {\r\n          self.options.boards.splice(i, 1)\r\n          break\r\n        }\r\n      }\r\n\r\n      return self\r\n    }\r\n\r\n    // board button on click function\r\n    this.onButtonClick = function (el) {}\r\n\r\n    //PRIVATE FUNCTION\r\n    function __extendDefaults (source, properties) {\r\n      var property\r\n      for (property in properties) {\r\n        if (properties.hasOwnProperty(property)) {\r\n          source[property] = properties[property]\r\n        }\r\n      }\r\n      return source\r\n    }\r\n\r\n    function __setBoard () {\r\n      self.element = document.querySelector(self.options.element)\r\n      //create container\r\n      var boardContainer = document.createElement('div')\r\n      boardContainer.classList.add('kanban-container')\r\n      self.container = boardContainer\r\n      //add boards\r\n\r\n      if (document.querySelector(self.options.element).dataset.hasOwnProperty('board')) {\r\n        url = document.querySelector(self.options.element).dataset.board\r\n        window.fetch(url, {\r\n          method: 'GET',\r\n          headers: { 'Content-Type': 'application/json' }\r\n        })\r\n          .then((response) => {\r\n            // log response text\r\n            response.json().then(function (data) {\r\n              self.options.boards = data\r\n              self.addBoards(self.options.boards, true)\r\n            })\r\n\r\n          })\r\n          .catch((error) => {\r\n            console.log('Error: ', error)\r\n          })\r\n      } else {\r\n        self.addBoards(self.options.boards, true)\r\n      }\r\n\r\n      //appends to container\r\n      self.element.appendChild(self.container)\r\n    }\r\n\r\n    function __onclickHandler (nodeItem, clickfn) {\r\n      nodeItem.addEventListener('click', function (e) {\r\n        e.preventDefault()\r\n        self.options.click(this)\r\n        if (typeof this.clickfn === 'function') this.clickfn(this)\r\n      })\r\n    }\r\n\r\n    function __onButtonClickHandler (nodeItem, boardId) {\r\n      nodeItem.addEventListener('click', function (e) {\r\n        e.preventDefault()\r\n        self.options.buttonClick(this, boardId)\r\n        // if(typeof(this.clickfn) === 'function')\r\n        //     this.clickfn(this);\r\n      })\r\n    }\r\n\r\n    function __findBoardJSON (id) {\r\n      var el = []\r\n      self.options.boards.map(function (board) {\r\n        if (board.id === id) {\r\n          return el.push(board)\r\n        }\r\n      })\r\n      return el[0]\r\n    }\r\n\r\n    function __appendCustomProperties (element, parentObject) {\r\n      for (var propertyName in parentObject) {\r\n        if (self._disallowedItemProperties.indexOf(propertyName) > -1) {\r\n          continue\r\n        }\r\n\r\n        element.setAttribute(\r\n          'data-' + propertyName,\r\n          parentObject[propertyName]\r\n        )\r\n      }\r\n    }\r\n\r\n    function __updateBoardsOrder () {\r\n      var index = 1\r\n      for (var i = 0; i < self.container.childNodes.length; i++) {\r\n        self.container.childNodes[i].dataset.order = index++\r\n      }\r\n    }\r\n\r\n    function __buildItemTitle (title) {\r\n      var result = title\r\n      if (self.options.itemHandleOptions.enabled) {\r\n        if ((self.options.itemHandleOptions.customHandler || undefined) === undefined) {\r\n          var customCssHandler = self.options.itemHandleOptions.customCssHandler\r\n          var customCssIconHandler = self.options.itemHandleOptions.customCssIconHandler\r\n          if ((customCssHandler || undefined) === undefined) {\r\n            customCssHandler = 'drag_handler'\r\n          }\r\n          if ((customCssIconHandler || undefined) === undefined) {\r\n            customCssIconHandler = customCssHandler + '_icon'\r\n          }\r\n\r\n          result = '<div class=\\'item_handle ' + customCssHandler + '\\'><i class=\\'item_handle ' + customCssIconHandler + '\\'></i></div><div>' + result + '</div>'\r\n        } else {\r\n          result = self.options.itemHandleOptions.customHandler.replace('%s', result)\r\n        }\r\n      }\r\n      return result\r\n    }\r\n\r\n    //init plugin\r\n    this.init()\r\n  }\r\n})()\r\n\r\n},{\"dragula\":9}],2:[function(require,module,exports){\r\nmodule.exports = function atoa (a, n) { return Array.prototype.slice.call(a, n); }\r\n\r\n},{}],3:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar ticky = require('ticky');\r\n\r\nmodule.exports = function debounce (fn, args, ctx) {\r\n  if (!fn) { return; }\r\n  ticky(function run () {\r\n    fn.apply(ctx || null, args || []);\r\n  });\r\n};\r\n\r\n},{\"ticky\":11}],4:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar atoa = require('atoa');\r\nvar debounce = require('./debounce');\r\n\r\nmodule.exports = function emitter (thing, options) {\r\n  var opts = options || {};\r\n  var evt = {};\r\n  if (thing === undefined) { thing = {}; }\r\n  thing.on = function (type, fn) {\r\n    if (!evt[type]) {\r\n      evt[type] = [fn];\r\n    } else {\r\n      evt[type].push(fn);\r\n    }\r\n    return thing;\r\n  };\r\n  thing.once = function (type, fn) {\r\n    fn._once = true; // thing.off(fn) still works!\r\n    thing.on(type, fn);\r\n    return thing;\r\n  };\r\n  thing.off = function (type, fn) {\r\n    var c = arguments.length;\r\n    if (c === 1) {\r\n      delete evt[type];\r\n    } else if (c === 0) {\r\n      evt = {};\r\n    } else {\r\n      var et = evt[type];\r\n      if (!et) { return thing; }\r\n      et.splice(et.indexOf(fn), 1);\r\n    }\r\n    return thing;\r\n  };\r\n  thing.emit = function () {\r\n    var args = atoa(arguments);\r\n    return thing.emitterSnapshot(args.shift()).apply(this, args);\r\n  };\r\n  thing.emitterSnapshot = function (type) {\r\n    var et = (evt[type] || []).slice(0);\r\n    return function () {\r\n      var args = atoa(arguments);\r\n      var ctx = this || thing;\r\n      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }\r\n      et.forEach(function emitter (listen) {\r\n        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }\r\n        if (listen._once) { thing.off(type, listen); }\r\n      });\r\n      return thing;\r\n    };\r\n  };\r\n  return thing;\r\n};\r\n\r\n},{\"./debounce\":3,\"atoa\":2}],5:[function(require,module,exports){\r\n(function (global){(function (){\r\n'use strict';\r\n\r\nvar customEvent = require('custom-event');\r\nvar eventmap = require('./eventmap');\r\nvar doc = global.document;\r\nvar addEvent = addEventEasy;\r\nvar removeEvent = removeEventEasy;\r\nvar hardCache = [];\r\n\r\nif (!global.addEventListener) {\r\n  addEvent = addEventHard;\r\n  removeEvent = removeEventHard;\r\n}\r\n\r\nmodule.exports = {\r\n  add: addEvent,\r\n  remove: removeEvent,\r\n  fabricate: fabricateEvent\r\n};\r\n\r\nfunction addEventEasy (el, type, fn, capturing) {\r\n  return el.addEventListener(type, fn, capturing);\r\n}\r\n\r\nfunction addEventHard (el, type, fn) {\r\n  return el.attachEvent('on' + type, wrap(el, type, fn));\r\n}\r\n\r\nfunction removeEventEasy (el, type, fn, capturing) {\r\n  return el.removeEventListener(type, fn, capturing);\r\n}\r\n\r\nfunction removeEventHard (el, type, fn) {\r\n  var listener = unwrap(el, type, fn);\r\n  if (listener) {\r\n    return el.detachEvent('on' + type, listener);\r\n  }\r\n}\r\n\r\nfunction fabricateEvent (el, type, model) {\r\n  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\r\n  if (el.dispatchEvent) {\r\n    el.dispatchEvent(e);\r\n  } else {\r\n    el.fireEvent('on' + type, e);\r\n  }\r\n  function makeClassicEvent () {\r\n    var e;\r\n    if (doc.createEvent) {\r\n      e = doc.createEvent('Event');\r\n      e.initEvent(type, true, true);\r\n    } else if (doc.createEventObject) {\r\n      e = doc.createEventObject();\r\n    }\r\n    return e;\r\n  }\r\n  function makeCustomEvent () {\r\n    return new customEvent(type, { detail: model });\r\n  }\r\n}\r\n\r\nfunction wrapperFactory (el, type, fn) {\r\n  return function wrapper (originalEvent) {\r\n    var e = originalEvent || global.event;\r\n    e.target = e.target || e.srcElement;\r\n    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };\r\n    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };\r\n    e.which = e.which || e.keyCode;\r\n    fn.call(el, e);\r\n  };\r\n}\r\n\r\nfunction wrap (el, type, fn) {\r\n  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\r\n  hardCache.push({\r\n    wrapper: wrapper,\r\n    element: el,\r\n    type: type,\r\n    fn: fn\r\n  });\r\n  return wrapper;\r\n}\r\n\r\nfunction unwrap (el, type, fn) {\r\n  var i = find(el, type, fn);\r\n  if (i) {\r\n    var wrapper = hardCache[i].wrapper;\r\n    hardCache.splice(i, 1); // free up a tad of memory\r\n    return wrapper;\r\n  }\r\n}\r\n\r\nfunction find (el, type, fn) {\r\n  var i, item;\r\n  for (i = 0; i < hardCache.length; i++) {\r\n    item = hardCache[i];\r\n    if (item.element === el && item.type === type && item.fn === fn) {\r\n      return i;\r\n    }\r\n  }\r\n}\r\n\r\n}).call(this)}).call(this,typeof __webpack_require__.g !== \"undefined\" ? __webpack_require__.g : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n},{\"./eventmap\":6,\"custom-event\":7}],6:[function(require,module,exports){\r\n(function (global){(function (){\r\n'use strict';\r\n\r\nvar eventmap = [];\r\nvar eventname = '';\r\nvar ron = /^on/;\r\n\r\nfor (eventname in global) {\r\n  if (ron.test(eventname)) {\r\n    eventmap.push(eventname.slice(2));\r\n  }\r\n}\r\n\r\nmodule.exports = eventmap;\r\n\r\n}).call(this)}).call(this,typeof __webpack_require__.g !== \"undefined\" ? __webpack_require__.g : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n},{}],7:[function(require,module,exports){\r\n(function (global){(function (){\r\n\r\nvar NativeCustomEvent = global.CustomEvent;\r\n\r\nfunction useNative () {\r\n  try {\r\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\r\n    return  'cat' === p.type && 'bar' === p.detail.foo;\r\n  } catch (e) {\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Cross-browser `CustomEvent` constructor.\r\n *\r\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\r\n *\r\n * @public\r\n */\r\n\r\nmodule.exports = useNative() ? NativeCustomEvent :\r\n\r\n// IE >= 9\r\n'undefined' !== typeof document && 'function' === typeof document.createEvent ? function CustomEvent (type, params) {\r\n  var e = document.createEvent('CustomEvent');\r\n  if (params) {\r\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\r\n  } else {\r\n    e.initCustomEvent(type, false, false, void 0);\r\n  }\r\n  return e;\r\n} :\r\n\r\n// IE <= 8\r\nfunction CustomEvent (type, params) {\r\n  var e = document.createEventObject();\r\n  e.type = type;\r\n  if (params) {\r\n    e.bubbles = Boolean(params.bubbles);\r\n    e.cancelable = Boolean(params.cancelable);\r\n    e.detail = params.detail;\r\n  } else {\r\n    e.bubbles = false;\r\n    e.cancelable = false;\r\n    e.detail = void 0;\r\n  }\r\n  return e;\r\n}\r\n\r\n}).call(this)}).call(this,typeof __webpack_require__.g !== \"undefined\" ? __webpack_require__.g : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n},{}],8:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar cache = {};\r\nvar start = '(?:^|\\\\s)';\r\nvar end = '(?:\\\\s|$)';\r\n\r\nfunction lookupClass (className) {\r\n  var cached = cache[className];\r\n  if (cached) {\r\n    cached.lastIndex = 0;\r\n  } else {\r\n    cache[className] = cached = new RegExp(start + className + end, 'g');\r\n  }\r\n  return cached;\r\n}\r\n\r\nfunction addClass (el, className) {\r\n  var current = el.className;\r\n  if (!current.length) {\r\n    el.className = className;\r\n  } else if (!lookupClass(className).test(current)) {\r\n    el.className += ' ' + className;\r\n  }\r\n}\r\n\r\nfunction rmClass (el, className) {\r\n  el.className = el.className.replace(lookupClass(className), ' ').trim();\r\n}\r\n\r\nmodule.exports = {\r\n  add: addClass,\r\n  rm: rmClass\r\n};\r\n\r\n},{}],9:[function(require,module,exports){\r\n(function (global){(function (){\r\n'use strict';\r\n\r\nvar emitter = require('contra/emitter');\r\nvar crossvent = require('crossvent');\r\nvar classes = require('./classes');\r\nvar doc = document;\r\nvar documentElement = doc.documentElement;\r\n\r\nfunction dragula (initialContainers, options) {\r\n  var len = arguments.length;\r\n  if (len === 1 && Array.isArray(initialContainers) === false) {\r\n    options = initialContainers;\r\n    initialContainers = [];\r\n  }\r\n  var _mirror; // mirror image\r\n  var _source; // source container\r\n  var _item; // item being dragged\r\n  var _offsetX; // reference x\r\n  var _offsetY; // reference y\r\n  var _moveX; // reference move x\r\n  var _moveY; // reference move y\r\n  var _initialSibling; // reference sibling when grabbed\r\n  var _currentSibling; // reference sibling now\r\n  var _copy; // item used for copying\r\n  var _renderTimer; // timer for setTimeout renderMirrorImage\r\n  var _lastDropTarget = null; // last container item was over\r\n  var _grabbed; // holds mousedown context until first mousemove\r\n\r\n  var o = options || {};\r\n  if (o.moves === void 0) { o.moves = always; }\r\n  if (o.accepts === void 0) { o.accepts = always; }\r\n  if (o.invalid === void 0) { o.invalid = invalidTarget; }\r\n  if (o.containers === void 0) { o.containers = initialContainers || []; }\r\n  if (o.isContainer === void 0) { o.isContainer = never; }\r\n  if (o.copy === void 0) { o.copy = false; }\r\n  if (o.copySortSource === void 0) { o.copySortSource = false; }\r\n  if (o.revertOnSpill === void 0) { o.revertOnSpill = false; }\r\n  if (o.removeOnSpill === void 0) { o.removeOnSpill = false; }\r\n  if (o.direction === void 0) { o.direction = 'vertical'; }\r\n  if (o.ignoreInputTextSelection === void 0) { o.ignoreInputTextSelection = true; }\r\n  if (o.mirrorContainer === void 0) { o.mirrorContainer = doc.body; }\r\n\r\n  var drake = emitter({\r\n    containers: o.containers,\r\n    start: manualStart,\r\n    end: end,\r\n    cancel: cancel,\r\n    remove: remove,\r\n    destroy: destroy,\r\n    canMove: canMove,\r\n    dragging: false\r\n  });\r\n\r\n  if (o.removeOnSpill === true) {\r\n    drake.on('over', spillOver).on('out', spillOut);\r\n  }\r\n\r\n  events();\r\n\r\n  return drake;\r\n\r\n  function isContainer (el) {\r\n    return drake.containers.indexOf(el) !== -1 || o.isContainer(el);\r\n  }\r\n\r\n  function events (remove) {\r\n    var op = remove ? 'remove' : 'add';\r\n    touchy(documentElement, op, 'mousedown', grab);\r\n    touchy(documentElement, op, 'mouseup', release);\r\n  }\r\n\r\n  function eventualMovements (remove) {\r\n    var op = remove ? 'remove' : 'add';\r\n    touchy(documentElement, op, 'mousemove', startBecauseMouseMoved);\r\n  }\r\n\r\n  function movements (remove) {\r\n    var op = remove ? 'remove' : 'add';\r\n    crossvent[op](documentElement, 'selectstart', preventGrabbed); // IE8\r\n    crossvent[op](documentElement, 'click', preventGrabbed);\r\n  }\r\n\r\n  function destroy () {\r\n    events(true);\r\n    release({});\r\n  }\r\n\r\n  function preventGrabbed (e) {\r\n    if (_grabbed) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  function grab (e) {\r\n    _moveX = e.clientX;\r\n    _moveY = e.clientY;\r\n\r\n    var ignore = whichMouseButton(e) !== 1 || e.metaKey || e.ctrlKey;\r\n    if (ignore) {\r\n      return; // we only care about honest-to-god left clicks and touch events\r\n    }\r\n    var item = e.target;\r\n    var context = canStart(item);\r\n    if (!context) {\r\n      return;\r\n    }\r\n    _grabbed = context;\r\n    eventualMovements();\r\n    if (e.type === 'mousedown') {\r\n      if (isInput(item)) { // see also: https://github.com/bevacqua/dragula/issues/208\r\n        item.focus(); // fixes https://github.com/bevacqua/dragula/issues/176\r\n      } else {\r\n        e.preventDefault(); // fixes https://github.com/bevacqua/dragula/issues/155\r\n      }\r\n    }\r\n  }\r\n\r\n  function startBecauseMouseMoved (e) {\r\n    if (!_grabbed) {\r\n      return;\r\n    }\r\n    if (whichMouseButton(e) === 0) {\r\n      release({});\r\n      return; // when text is selected on an input and then dragged, mouseup doesn't fire. this is our only hope\r\n    }\r\n\r\n    // truthy check fixes #239, equality fixes #207, fixes #501\r\n    if ((e.clientX !== void 0 && Math.abs(e.clientX - _moveX) <= (o.slideFactorX || 0)) &&\r\n      (e.clientY !== void 0 && Math.abs(e.clientY - _moveY) <= (o.slideFactorY || 0))) {\r\n      return;\r\n    }\r\n\r\n    if (o.ignoreInputTextSelection) {\r\n      var clientX = getCoord('clientX', e) || 0;\r\n      var clientY = getCoord('clientY', e) || 0;\r\n      var elementBehindCursor = doc.elementFromPoint(clientX, clientY);\r\n      if (isInput(elementBehindCursor)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var grabbed = _grabbed; // call to end() unsets _grabbed\r\n    eventualMovements(true);\r\n    movements();\r\n    end();\r\n    start(grabbed);\r\n\r\n    var offset = getOffset(_item);\r\n    _offsetX = getCoord('pageX', e) - offset.left;\r\n    _offsetY = getCoord('pageY', e) - offset.top;\r\n\r\n    classes.add(_copy || _item, 'gu-transit');\r\n    renderMirrorImage();\r\n    drag(e);\r\n  }\r\n\r\n  function canStart (item) {\r\n    if (drake.dragging && _mirror) {\r\n      return;\r\n    }\r\n    if (isContainer(item)) {\r\n      return; // don't drag container itself\r\n    }\r\n    var handle = item;\r\n    while (getParent(item) && isContainer(getParent(item)) === false) {\r\n      if (o.invalid(item, handle)) {\r\n        return;\r\n      }\r\n      item = getParent(item); // drag target should be a top element\r\n      if (!item) {\r\n        return;\r\n      }\r\n    }\r\n    var source = getParent(item);\r\n    if (!source) {\r\n      return;\r\n    }\r\n    if (o.invalid(item, handle)) {\r\n      return;\r\n    }\r\n\r\n    var movable = o.moves(item, source, handle, nextEl(item));\r\n    if (!movable) {\r\n      return;\r\n    }\r\n\r\n    return {\r\n      item: item,\r\n      source: source\r\n    };\r\n  }\r\n\r\n  function canMove (item) {\r\n    return !!canStart(item);\r\n  }\r\n\r\n  function manualStart (item) {\r\n    var context = canStart(item);\r\n    if (context) {\r\n      start(context);\r\n    }\r\n  }\r\n\r\n  function start (context) {\r\n    if (isCopy(context.item, context.source)) {\r\n      _copy = context.item.cloneNode(true);\r\n      drake.emit('cloned', _copy, context.item, 'copy');\r\n    }\r\n\r\n    _source = context.source;\r\n    _item = context.item;\r\n    _initialSibling = _currentSibling = nextEl(context.item);\r\n\r\n    drake.dragging = true;\r\n    drake.emit('drag', _item, _source);\r\n  }\r\n\r\n  function invalidTarget () {\r\n    return false;\r\n  }\r\n\r\n  function end () {\r\n    if (!drake.dragging) {\r\n      return;\r\n    }\r\n    var item = _copy || _item;\r\n    drop(item, getParent(item));\r\n  }\r\n\r\n  function ungrab () {\r\n    _grabbed = false;\r\n    eventualMovements(true);\r\n    movements(true);\r\n  }\r\n\r\n  function release (e) {\r\n    ungrab();\r\n\r\n    if (!drake.dragging) {\r\n      return;\r\n    }\r\n    var item = _copy || _item;\r\n    var clientX = getCoord('clientX', e) || 0;\r\n    var clientY = getCoord('clientY', e) || 0;\r\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\r\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\r\n    if (dropTarget && ((_copy && o.copySortSource) || (!_copy || dropTarget !== _source))) {\r\n      drop(item, dropTarget);\r\n    } else if (o.removeOnSpill) {\r\n      remove();\r\n    } else {\r\n      cancel();\r\n    }\r\n  }\r\n\r\n  function drop (item, target) {\r\n    var parent = getParent(item);\r\n    if (_copy && o.copySortSource && target === _source) {\r\n      parent.removeChild(_item);\r\n    }\r\n    if (isInitialPlacement(target)) {\r\n      drake.emit('cancel', item, _source, _source);\r\n    } else {\r\n      drake.emit('drop', item, target, _source, _currentSibling);\r\n    }\r\n    cleanup();\r\n  }\r\n\r\n  function remove () {\r\n    if (!drake.dragging) {\r\n      return;\r\n    }\r\n    var item = _copy || _item;\r\n    var parent = getParent(item);\r\n    if (parent) {\r\n      parent.removeChild(item);\r\n    }\r\n    drake.emit(_copy ? 'cancel' : 'remove', item, parent, _source);\r\n    cleanup();\r\n  }\r\n\r\n  function cancel (revert) {\r\n    if (!drake.dragging) {\r\n      return;\r\n    }\r\n    var reverts = arguments.length > 0 ? revert : o.revertOnSpill;\r\n    var item = _copy || _item;\r\n    var parent = getParent(item);\r\n    var initial = isInitialPlacement(parent);\r\n    if (initial === false && reverts) {\r\n      if (_copy) {\r\n        if (parent) {\r\n          parent.removeChild(_copy);\r\n        }\r\n      } else {\r\n        _source.insertBefore(item, _initialSibling);\r\n      }\r\n    }\r\n    if (initial || reverts) {\r\n      drake.emit('cancel', item, _source, _source);\r\n    } else {\r\n      drake.emit('drop', item, parent, _source, _currentSibling);\r\n    }\r\n    cleanup();\r\n  }\r\n\r\n  function cleanup () {\r\n    var item = _copy || _item;\r\n    ungrab();\r\n    removeMirrorImage();\r\n    if (item) {\r\n      classes.rm(item, 'gu-transit');\r\n    }\r\n    if (_renderTimer) {\r\n      clearTimeout(_renderTimer);\r\n    }\r\n    drake.dragging = false;\r\n    if (_lastDropTarget) {\r\n      drake.emit('out', item, _lastDropTarget, _source);\r\n    }\r\n    drake.emit('dragend', item);\r\n    _source = _item = _copy = _initialSibling = _currentSibling = _renderTimer = _lastDropTarget = null;\r\n  }\r\n\r\n  function isInitialPlacement (target, s) {\r\n    var sibling;\r\n    if (s !== void 0) {\r\n      sibling = s;\r\n    } else if (_mirror) {\r\n      sibling = _currentSibling;\r\n    } else {\r\n      sibling = nextEl(_copy || _item);\r\n    }\r\n    return target === _source && sibling === _initialSibling;\r\n  }\r\n\r\n  function findDropTarget (elementBehindCursor, clientX, clientY) {\r\n    var target = elementBehindCursor;\r\n    while (target && !accepted()) {\r\n      target = getParent(target);\r\n    }\r\n    return target;\r\n\r\n    function accepted () {\r\n      var droppable = isContainer(target);\r\n      if (droppable === false) {\r\n        return false;\r\n      }\r\n\r\n      var immediate = getImmediateChild(target, elementBehindCursor);\r\n      var reference = getReference(target, immediate, clientX, clientY);\r\n      var initial = isInitialPlacement(target, reference);\r\n      if (initial) {\r\n        return true; // should always be able to drop it right back where it was\r\n      }\r\n      return o.accepts(_item, target, _source, reference);\r\n    }\r\n  }\r\n\r\n  function drag (e) {\r\n    if (!_mirror) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n\r\n    var clientX = getCoord('clientX', e) || 0;\r\n    var clientY = getCoord('clientY', e) || 0;\r\n    var x = clientX - _offsetX;\r\n    var y = clientY - _offsetY;\r\n\r\n    _mirror.style.left = x + 'px';\r\n    _mirror.style.top = y + 'px';\r\n\r\n    var item = _copy || _item;\r\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\r\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\r\n    var changed = dropTarget !== null && dropTarget !== _lastDropTarget;\r\n    if (changed || dropTarget === null) {\r\n      out();\r\n      _lastDropTarget = dropTarget;\r\n      over();\r\n    }\r\n    var parent = getParent(item);\r\n    if (dropTarget === _source && _copy && !o.copySortSource) {\r\n      if (parent) {\r\n        parent.removeChild(item);\r\n      }\r\n      return;\r\n    }\r\n    var reference;\r\n    var immediate = getImmediateChild(dropTarget, elementBehindCursor);\r\n    if (immediate !== null) {\r\n      reference = getReference(dropTarget, immediate, clientX, clientY);\r\n    } else if (o.revertOnSpill === true && !_copy) {\r\n      reference = _initialSibling;\r\n      dropTarget = _source;\r\n    } else {\r\n      if (_copy && parent) {\r\n        parent.removeChild(item);\r\n      }\r\n      return;\r\n    }\r\n    if (\r\n      (reference === null && changed) ||\r\n      reference !== item &&\r\n      reference !== nextEl(item)\r\n    ) {\r\n      _currentSibling = reference;\r\n      dropTarget.insertBefore(item, reference);\r\n      drake.emit('shadow', item, dropTarget, _source);\r\n    }\r\n    function moved (type) { drake.emit(type, item, _lastDropTarget, _source); }\r\n    function over () { if (changed) { moved('over'); } }\r\n    function out () { if (_lastDropTarget) { moved('out'); } }\r\n  }\r\n\r\n  function spillOver (el) {\r\n    classes.rm(el, 'gu-hide');\r\n  }\r\n\r\n  function spillOut (el) {\r\n    if (drake.dragging) { classes.add(el, 'gu-hide'); }\r\n  }\r\n\r\n  function renderMirrorImage () {\r\n    if (_mirror) {\r\n      return;\r\n    }\r\n    var rect = _item.getBoundingClientRect();\r\n    _mirror = _item.cloneNode(true);\r\n    _mirror.style.width = getRectWidth(rect) + 'px';\r\n    _mirror.style.height = getRectHeight(rect) + 'px';\r\n    classes.rm(_mirror, 'gu-transit');\r\n    classes.add(_mirror, 'gu-mirror');\r\n    o.mirrorContainer.appendChild(_mirror);\r\n    touchy(documentElement, 'add', 'mousemove', drag);\r\n    classes.add(o.mirrorContainer, 'gu-unselectable');\r\n    drake.emit('cloned', _mirror, _item, 'mirror');\r\n  }\r\n\r\n  function removeMirrorImage () {\r\n    if (_mirror) {\r\n      classes.rm(o.mirrorContainer, 'gu-unselectable');\r\n      touchy(documentElement, 'remove', 'mousemove', drag);\r\n      getParent(_mirror).removeChild(_mirror);\r\n      _mirror = null;\r\n    }\r\n  }\r\n\r\n  function getImmediateChild (dropTarget, target) {\r\n    var immediate = target;\r\n    while (immediate !== dropTarget && getParent(immediate) !== dropTarget) {\r\n      immediate = getParent(immediate);\r\n    }\r\n    if (immediate === documentElement) {\r\n      return null;\r\n    }\r\n    return immediate;\r\n  }\r\n\r\n  function getReference (dropTarget, target, x, y) {\r\n    var horizontal = o.direction === 'horizontal';\r\n    var reference = target !== dropTarget ? inside() : outside();\r\n    return reference;\r\n\r\n    function outside () { // slower, but able to figure out any position\r\n      var len = dropTarget.children.length;\r\n      var i;\r\n      var el;\r\n      var rect;\r\n      for (i = 0; i < len; i++) {\r\n        el = dropTarget.children[i];\r\n        rect = el.getBoundingClientRect();\r\n        if (horizontal && (rect.left + rect.width / 2) > x) { return el; }\r\n        if (!horizontal && (rect.top + rect.height / 2) > y) { return el; }\r\n      }\r\n      return null;\r\n    }\r\n\r\n    function inside () { // faster, but only available if dropped inside a child element\r\n      var rect = target.getBoundingClientRect();\r\n      if (horizontal) {\r\n        return resolve(x > rect.left + getRectWidth(rect) / 2);\r\n      }\r\n      return resolve(y > rect.top + getRectHeight(rect) / 2);\r\n    }\r\n\r\n    function resolve (after) {\r\n      return after ? nextEl(target) : target;\r\n    }\r\n  }\r\n\r\n  function isCopy (item, container) {\r\n    return typeof o.copy === 'boolean' ? o.copy : o.copy(item, container);\r\n  }\r\n}\r\n\r\nfunction touchy (el, op, type, fn) {\r\n  var touch = {\r\n    mouseup: 'touchend',\r\n    mousedown: 'touchstart',\r\n    mousemove: 'touchmove'\r\n  };\r\n  var pointers = {\r\n    mouseup: 'pointerup',\r\n    mousedown: 'pointerdown',\r\n    mousemove: 'pointermove'\r\n  };\r\n  var microsoft = {\r\n    mouseup: 'MSPointerUp',\r\n    mousedown: 'MSPointerDown',\r\n    mousemove: 'MSPointerMove'\r\n  };\r\n  if (global.navigator.pointerEnabled) {\r\n    crossvent[op](el, pointers[type], fn);\r\n  } else if (global.navigator.msPointerEnabled) {\r\n    crossvent[op](el, microsoft[type], fn);\r\n  } else {\r\n    crossvent[op](el, touch[type], fn);\r\n    crossvent[op](el, type, fn);\r\n  }\r\n}\r\n\r\nfunction whichMouseButton (e) {\r\n  if (e.touches !== void 0) { return e.touches.length; }\r\n  if (e.which !== void 0 && e.which !== 0) { return e.which; } // see https://github.com/bevacqua/dragula/issues/261\r\n  if (e.buttons !== void 0) { return e.buttons; }\r\n  var button = e.button;\r\n  if (button !== void 0) { // see https://github.com/jquery/jquery/blob/99e8ff1baa7ae341e94bb89c3e84570c7c3ad9ea/src/event.js#L573-L575\r\n    return button & 1 ? 1 : button & 2 ? 3 : (button & 4 ? 2 : 0);\r\n  }\r\n}\r\n\r\nfunction getOffset (el) {\r\n  var rect = el.getBoundingClientRect();\r\n  return {\r\n    left: rect.left + getScroll('scrollLeft', 'pageXOffset'),\r\n    top: rect.top + getScroll('scrollTop', 'pageYOffset')\r\n  };\r\n}\r\n\r\nfunction getScroll (scrollProp, offsetProp) {\r\n  if (typeof global[offsetProp] !== 'undefined') {\r\n    return global[offsetProp];\r\n  }\r\n  if (documentElement.clientHeight) {\r\n    return documentElement[scrollProp];\r\n  }\r\n  return doc.body[scrollProp];\r\n}\r\n\r\nfunction getElementBehindPoint (point, x, y) {\r\n  point = point || {};\r\n  var state = point.className || '';\r\n  var el;\r\n  point.className += ' gu-hide';\r\n  el = doc.elementFromPoint(x, y);\r\n  point.className = state;\r\n  return el;\r\n}\r\n\r\nfunction never () { return false; }\r\nfunction always () { return true; }\r\nfunction getRectWidth (rect) { return rect.width || (rect.right - rect.left); }\r\nfunction getRectHeight (rect) { return rect.height || (rect.bottom - rect.top); }\r\nfunction getParent (el) { return el.parentNode === doc ? null : el.parentNode; }\r\nfunction isInput (el) { return el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT' || isEditable(el); }\r\nfunction isEditable (el) {\r\n  if (!el) { return false; } // no parents were editable\r\n  if (el.contentEditable === 'false') { return false; } // stop the lookup\r\n  if (el.contentEditable === 'true') { return true; } // found a contentEditable element in the chain\r\n  return isEditable(getParent(el)); // contentEditable is set to 'inherit'\r\n}\r\n\r\nfunction nextEl (el) {\r\n  return el.nextElementSibling || manually();\r\n  function manually () {\r\n    var sibling = el;\r\n    do {\r\n      sibling = sibling.nextSibling;\r\n    } while (sibling && sibling.nodeType !== 1);\r\n    return sibling;\r\n  }\r\n}\r\n\r\nfunction getEventHost (e) {\r\n  // on touchend event, we have to use `e.changedTouches`\r\n  // see http://stackoverflow.com/questions/7192563/touchend-event-properties\r\n  // see https://github.com/bevacqua/dragula/issues/34\r\n  if (e.targetTouches && e.targetTouches.length) {\r\n    return e.targetTouches[0];\r\n  }\r\n  if (e.changedTouches && e.changedTouches.length) {\r\n    return e.changedTouches[0];\r\n  }\r\n  return e;\r\n}\r\n\r\nfunction getCoord (coord, e) {\r\n  var host = getEventHost(e);\r\n  var missMap = {\r\n    pageX: 'clientX', // IE8\r\n    pageY: 'clientY' // IE8\r\n  };\r\n  if (coord in missMap && !(coord in host) && missMap[coord] in host) {\r\n    coord = missMap[coord];\r\n  }\r\n  return host[coord];\r\n}\r\n\r\nmodule.exports = dragula;\r\n\r\n}).call(this)}).call(this,typeof __webpack_require__.g !== \"undefined\" ? __webpack_require__.g : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n},{\"./classes\":8,\"contra/emitter\":4,\"crossvent\":5}],10:[function(require,module,exports){\r\n// shim for using process in browser\r\nvar process = module.exports = {};\r\n\r\n// cached from whatever global is present so that test runners that stub it\r\n// don't break things.  But we need to wrap it in a try catch in case it is\r\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\r\n// function because try/catches deoptimize in certain engines.\r\n\r\nvar cachedSetTimeout;\r\nvar cachedClearTimeout;\r\n\r\nfunction defaultSetTimout() {\r\n    throw new Error('setTimeout has not been defined');\r\n}\r\nfunction defaultClearTimeout () {\r\n    throw new Error('clearTimeout has not been defined');\r\n}\r\n(function () {\r\n    try {\r\n        if (typeof setTimeout === 'function') {\r\n            cachedSetTimeout = setTimeout;\r\n        } else {\r\n            cachedSetTimeout = defaultSetTimout;\r\n        }\r\n    } catch (e) {\r\n        cachedSetTimeout = defaultSetTimout;\r\n    }\r\n    try {\r\n        if (typeof clearTimeout === 'function') {\r\n            cachedClearTimeout = clearTimeout;\r\n        } else {\r\n            cachedClearTimeout = defaultClearTimeout;\r\n        }\r\n    } catch (e) {\r\n        cachedClearTimeout = defaultClearTimeout;\r\n    }\r\n} ())\r\nfunction runTimeout(fun) {\r\n    if (cachedSetTimeout === setTimeout) {\r\n        //normal enviroments in sane situations\r\n        return setTimeout(fun, 0);\r\n    }\r\n    // if setTimeout wasn't available but was latter defined\r\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\r\n        cachedSetTimeout = setTimeout;\r\n        return setTimeout(fun, 0);\r\n    }\r\n    try {\r\n        // when when somebody has screwed with setTimeout but no I.E. maddness\r\n        return cachedSetTimeout(fun, 0);\r\n    } catch(e){\r\n        try {\r\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\r\n            return cachedSetTimeout.call(null, fun, 0);\r\n        } catch(e){\r\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\r\n            return cachedSetTimeout.call(this, fun, 0);\r\n        }\r\n    }\r\n\r\n\r\n}\r\nfunction runClearTimeout(marker) {\r\n    if (cachedClearTimeout === clearTimeout) {\r\n        //normal enviroments in sane situations\r\n        return clearTimeout(marker);\r\n    }\r\n    // if clearTimeout wasn't available but was latter defined\r\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\r\n        cachedClearTimeout = clearTimeout;\r\n        return clearTimeout(marker);\r\n    }\r\n    try {\r\n        // when when somebody has screwed with setTimeout but no I.E. maddness\r\n        return cachedClearTimeout(marker);\r\n    } catch (e){\r\n        try {\r\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\r\n            return cachedClearTimeout.call(null, marker);\r\n        } catch (e){\r\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\r\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\r\n            return cachedClearTimeout.call(this, marker);\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\nvar queue = [];\r\nvar draining = false;\r\nvar currentQueue;\r\nvar queueIndex = -1;\r\n\r\nfunction cleanUpNextTick() {\r\n    if (!draining || !currentQueue) {\r\n        return;\r\n    }\r\n    draining = false;\r\n    if (currentQueue.length) {\r\n        queue = currentQueue.concat(queue);\r\n    } else {\r\n        queueIndex = -1;\r\n    }\r\n    if (queue.length) {\r\n        drainQueue();\r\n    }\r\n}\r\n\r\nfunction drainQueue() {\r\n    if (draining) {\r\n        return;\r\n    }\r\n    var timeout = runTimeout(cleanUpNextTick);\r\n    draining = true;\r\n\r\n    var len = queue.length;\r\n    while(len) {\r\n        currentQueue = queue;\r\n        queue = [];\r\n        while (++queueIndex < len) {\r\n            if (currentQueue) {\r\n                currentQueue[queueIndex].run();\r\n            }\r\n        }\r\n        queueIndex = -1;\r\n        len = queue.length;\r\n    }\r\n    currentQueue = null;\r\n    draining = false;\r\n    runClearTimeout(timeout);\r\n}\r\n\r\nprocess.nextTick = function (fun) {\r\n    var args = new Array(arguments.length - 1);\r\n    if (arguments.length > 1) {\r\n        for (var i = 1; i < arguments.length; i++) {\r\n            args[i - 1] = arguments[i];\r\n        }\r\n    }\r\n    queue.push(new Item(fun, args));\r\n    if (queue.length === 1 && !draining) {\r\n        runTimeout(drainQueue);\r\n    }\r\n};\r\n\r\n// v8 likes predictible objects\r\nfunction Item(fun, array) {\r\n    this.fun = fun;\r\n    this.array = array;\r\n}\r\nItem.prototype.run = function () {\r\n    this.fun.apply(null, this.array);\r\n};\r\nprocess.title = 'browser';\r\nprocess.browser = true;\r\nprocess.env = {};\r\nprocess.argv = [];\r\nprocess.version = ''; // empty string to avoid regexp issues\r\nprocess.versions = {};\r\n\r\nfunction noop() {}\r\n\r\nprocess.on = noop;\r\nprocess.addListener = noop;\r\nprocess.once = noop;\r\nprocess.off = noop;\r\nprocess.removeListener = noop;\r\nprocess.removeAllListeners = noop;\r\nprocess.emit = noop;\r\nprocess.prependListener = noop;\r\nprocess.prependOnceListener = noop;\r\n\r\nprocess.listeners = function (name) { return [] }\r\n\r\nprocess.binding = function (name) {\r\n    throw new Error('process.binding is not supported');\r\n};\r\n\r\nprocess.cwd = function () { return '/' };\r\nprocess.chdir = function (dir) {\r\n    throw new Error('process.chdir is not supported');\r\n};\r\nprocess.umask = function() { return 0; };\r\n\r\n},{}],11:[function(require,module,exports){\r\n(function (setImmediate){(function (){\r\nvar si = typeof setImmediate === 'function', tick;\r\nif (si) {\r\n  tick = function (fn) { setImmediate(fn); };\r\n} else {\r\n  tick = function (fn) { setTimeout(fn, 0); };\r\n}\r\n\r\nmodule.exports = tick;\r\n}).call(this)}).call(this,require(\"timers\").setImmediate)\r\n},{\"timers\":12}],12:[function(require,module,exports){\r\n(function (setImmediate,clearImmediate){(function (){\r\nvar nextTick = require('process/browser.js').nextTick;\r\nvar apply = Function.prototype.apply;\r\nvar slice = Array.prototype.slice;\r\nvar immediateIds = {};\r\nvar nextImmediateId = 0;\r\n\r\n// DOM APIs, for completeness\r\n\r\nexports.setTimeout = function() {\r\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\r\n};\r\nexports.setInterval = function() {\r\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\r\n};\r\nexports.clearTimeout =\r\nexports.clearInterval = function(timeout) { timeout.close(); };\r\n\r\nfunction Timeout(id, clearFn) {\r\n  this._id = id;\r\n  this._clearFn = clearFn;\r\n}\r\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\r\nTimeout.prototype.close = function() {\r\n  this._clearFn.call(window, this._id);\r\n};\r\n\r\n// Does not start the time, just sets up the members needed.\r\nexports.enroll = function(item, msecs) {\r\n  clearTimeout(item._idleTimeoutId);\r\n  item._idleTimeout = msecs;\r\n};\r\n\r\nexports.unenroll = function(item) {\r\n  clearTimeout(item._idleTimeoutId);\r\n  item._idleTimeout = -1;\r\n};\r\n\r\nexports._unrefActive = exports.active = function(item) {\r\n  clearTimeout(item._idleTimeoutId);\r\n\r\n  var msecs = item._idleTimeout;\r\n  if (msecs >= 0) {\r\n    item._idleTimeoutId = setTimeout(function onTimeout() {\r\n      if (item._onTimeout)\r\n        item._onTimeout();\r\n    }, msecs);\r\n  }\r\n};\r\n\r\n// That's not how node.js implements it but the exposed api is the same.\r\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\r\n  var id = nextImmediateId++;\r\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\r\n\r\n  immediateIds[id] = true;\r\n\r\n  nextTick(function onNextTick() {\r\n    if (immediateIds[id]) {\r\n      // fn.call() is faster so we optimize for the common use-case\r\n      // @see http://jsperf.com/call-apply-segu\r\n      if (args) {\r\n        fn.apply(null, args);\r\n      } else {\r\n        fn.call(null);\r\n      }\r\n      // Prevent ids from leaking\r\n      exports.clearImmediate(id);\r\n    }\r\n  });\r\n\r\n  return id;\r\n};\r\n\r\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\r\n  delete immediateIds[id];\r\n};\r\n}).call(this)}).call(this,require(\"timers\").setImmediate,require(\"timers\").clearImmediate)\r\n},{\"process/browser.js\":10,\"timers\":12}]},{},[1]);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvamthbmJhbi9kaXN0L2prYW5iYW4uanMuanMiLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxrQkFBa0IsZ0JBQWdCLFVBQVUsVUFBVSxNQUFNLFNBQW1DLENBQUMsZ0JBQWdCLE9BQUMsT0FBTyxvQkFBb0IsOENBQThDLGtDQUFrQyxZQUFZLFlBQVksbUNBQW1DLGlCQUFpQixlQUFlLHNCQUFzQixvQkFBb0IsVUFBVSxTQUFtQyxLQUFLLFdBQVcsWUFBWSxTQUFTLFNBQVMsS0FBSztBQUM3YztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QyxpQ0FBaUM7QUFDakMsdURBQXVEO0FBQ3ZELHlDQUF5QztBQUN6QyxvQ0FBb0M7QUFDcEMsMERBQTBEO0FBQzFELDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUJBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGdDQUFnQztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0JBQXNCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EsQ0FBQyxHQUFHO0FBQ0oseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsRUFBRTtBQUNGLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxDQUFDLGFBQWE7QUFDZCxDQUFDLEVBQUUsWUFBWTtBQUNmLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxhQUFhO0FBQ2QsQ0FBQyxFQUFFLG9DQUFvQyxFQUFFLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvamthbmJhbi9kaXN0L2prYW5iYW4uanM/Mzk3YiJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcclxuLyoqXHJcbiAqIGpLYW5iYW5cclxuICogVmFuaWxsYSBKYXZhc2NyaXB0IHBsdWdpbiBmb3IgbWFuYWdlIGthbmJhbiBib2FyZHNcclxuICpcclxuICogQHNpdGU6IGh0dHA6Ly93d3cucmljY2FyZG90YXJ0YWdsaWEuaXQvamthbmJhbi9cclxuICogQGF1dGhvcjogUmljY2FyZG8gVGFydGFnbGlhXHJcbiAqL1xyXG5cclxuLy9SZXF1aXJlIGRyYWd1bGFcclxudmFyIGRyYWd1bGEgPSByZXF1aXJlKCdkcmFndWxhJyk7XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMuakthbmJhbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgdmFyIF9fREVGQVVMVF9JVEVNX0hBTkRMRV9PUFRJT05TID0ge1xyXG4gICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgdmFyIF9fREVGQVVMVF9JVEVNX0FERF9PUFRJT05TID0ge1xyXG4gICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgdGhpcy5fZGlzYWxsb3dlZEl0ZW1Qcm9wZXJ0aWVzID0gW1xyXG4gICAgICAnaWQnLFxyXG4gICAgICAndGl0bGUnLFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICAnZHJhZycsXHJcbiAgICAgICdkcmFnZW5kJyxcclxuICAgICAgJ2Ryb3AnLFxyXG4gICAgICAnb3JkZXInXHJcbiAgICBdXHJcbiAgICB0aGlzLmVsZW1lbnQgPSAnJ1xyXG4gICAgdGhpcy5jb250YWluZXIgPSAnJ1xyXG4gICAgdGhpcy5ib2FyZENvbnRhaW5lciA9IFtdXHJcbiAgICB0aGlzLmhhbmRsZXJzID0gW11cclxuICAgIHRoaXMuZHJhZ3VsYSA9IGRyYWd1bGFcclxuICAgIHRoaXMuZHJha2UgPSAnJ1xyXG4gICAgdGhpcy5kcmFrZUJvYXJkID0gJydcclxuICAgIHRoaXMuaXRlbUFkZE9wdGlvbnMgPSBfX0RFRkFVTFRfSVRFTV9BRERfT1BUSU9OU1xyXG4gICAgdGhpcy5pdGVtSGFuZGxlT3B0aW9ucyA9IF9fREVGQVVMVF9JVEVNX0hBTkRMRV9PUFRJT05TXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgIGVsZW1lbnQ6ICcnLFxyXG4gICAgICBndXR0ZXI6ICcxNXB4JyxcclxuICAgICAgd2lkdGhCb2FyZDogJzI1MHB4JyxcclxuICAgICAgcmVzcG9uc2l2ZTogJzcwMCcsXHJcbiAgICAgIHJlc3BvbnNpdmVQZXJjZW50YWdlOiBmYWxzZSxcclxuICAgICAgYm9hcmRzOiBbXSxcclxuICAgICAgZHJhZ0JvYXJkczogdHJ1ZSxcclxuICAgICAgZHJhZ0l0ZW1zOiB0cnVlLCAvL3doZXRoZXIgY2FuIGRyYWcgY2FyZHMgb3Igbm90LCB1c2VmdWwgd2hlbiBzZXQgcGVybWlzc2lvbnMgb24gaXQuXHJcbiAgICAgIGl0ZW1BZGRPcHRpb25zOiBfX0RFRkFVTFRfSVRFTV9BRERfT1BUSU9OUyxcclxuICAgICAgaXRlbUhhbmRsZU9wdGlvbnM6IF9fREVGQVVMVF9JVEVNX0hBTkRMRV9PUFRJT05TLFxyXG4gICAgICBkcmFnRWw6IGZ1bmN0aW9uIChlbCwgc291cmNlKSB7fSxcclxuICAgICAgZHJhZ2VuZEVsOiBmdW5jdGlvbiAoZWwpIHt9LFxyXG4gICAgICBkcm9wRWw6IGZ1bmN0aW9uIChlbCwgdGFyZ2V0LCBzb3VyY2UsIHNpYmxpbmcpIHt9LFxyXG4gICAgICBkcmFnQm9hcmQ6IGZ1bmN0aW9uIChlbCwgc291cmNlKSB7fSxcclxuICAgICAgZHJhZ2VuZEJvYXJkOiBmdW5jdGlvbiAoZWwpIHt9LFxyXG4gICAgICBkcm9wQm9hcmQ6IGZ1bmN0aW9uIChlbCwgdGFyZ2V0LCBzb3VyY2UsIHNpYmxpbmcpIHt9LFxyXG4gICAgICBjbGljazogZnVuY3Rpb24gKGVsKSB7fSxcclxuICAgICAgYnV0dG9uQ2xpY2s6IGZ1bmN0aW9uIChlbCwgYm9hcmRJZCkge31cclxuICAgIH1cclxuXHJcbiAgICBpZiAoYXJndW1lbnRzWzBdICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucyA9IF9fZXh0ZW5kRGVmYXVsdHMoZGVmYXVsdHMsIGFyZ3VtZW50c1swXSlcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9fZ2V0Q2FuTW92ZSA9IGZ1bmN0aW9uIChoYW5kbGUpIHtcclxuICAgICAgaWYgKCFzZWxmLm9wdGlvbnMuaXRlbUhhbmRsZU9wdGlvbnMuZW5hYmxlZCkge1xyXG4gICAgICAgIHJldHVybiAhIXNlbGYub3B0aW9ucy5kcmFnSXRlbXNcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHNlbGYub3B0aW9ucy5pdGVtSGFuZGxlT3B0aW9ucy5oYW5kbGVDbGFzcykge1xyXG4gICAgICAgIHJldHVybiBoYW5kbGUuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGYub3B0aW9ucy5pdGVtSGFuZGxlT3B0aW9ucy5oYW5kbGVDbGFzcylcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGhhbmRsZS5jbGFzc0xpc3QuY29udGFpbnMoJ2l0ZW1faGFuZGxlJylcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIC8vc2V0IGluaXRpYWwgYm9hcmRzXHJcbiAgICAgIF9fc2V0Qm9hcmQoKVxyXG4gICAgICAvL3NldCBkcmFnIHdpdGggZHJhZ3VsYVxyXG4gICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPiBzZWxmLm9wdGlvbnMucmVzcG9uc2l2ZSkge1xyXG4gICAgICAgIC8vSW5pdCBEcmFnIEJvYXJkXHJcbiAgICAgICAgc2VsZi5kcmFrZUJvYXJkID0gc2VsZlxyXG4gICAgICAgICAgLmRyYWd1bGEoW3NlbGYuY29udGFpbmVyXSwge1xyXG4gICAgICAgICAgICBtb3ZlczogZnVuY3Rpb24gKGVsLCBzb3VyY2UsIGhhbmRsZSwgc2libGluZykge1xyXG4gICAgICAgICAgICAgIGlmICghc2VsZi5vcHRpb25zLmRyYWdCb2FyZHMpIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICBoYW5kbGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdrYW5iYW4tYm9hcmQtaGVhZGVyJykgfHxcclxuICAgICAgICAgICAgICAgIGhhbmRsZS5jbGFzc0xpc3QuY29udGFpbnMoJ2thbmJhbi10aXRsZS1ib2FyZCcpXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhY2NlcHRzOiBmdW5jdGlvbiAoZWwsIHRhcmdldCwgc291cmNlLCBzaWJsaW5nKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2thbmJhbi1jb250YWluZXInKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZXZlcnRPblNwaWxsOiB0cnVlLFxyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJ1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5vbignZHJhZycsIGZ1bmN0aW9uIChlbCwgc291cmNlKSB7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2lzLW1vdmluZycpXHJcbiAgICAgICAgICAgIHNlbGYub3B0aW9ucy5kcmFnQm9hcmQoZWwsIHNvdXJjZSlcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbC5kcmFnZm4gPT09ICdmdW5jdGlvbicpIGVsLmRyYWdmbihlbCwgc291cmNlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5vbignZHJhZ2VuZCcsIGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICBfX3VwZGF0ZUJvYXJkc09yZGVyKClcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbW92aW5nJylcclxuICAgICAgICAgICAgc2VsZi5vcHRpb25zLmRyYWdlbmRCb2FyZChlbClcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbC5kcmFnZW5kZm4gPT09ICdmdW5jdGlvbicpIGVsLmRyYWdlbmRmbihlbClcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAub24oJ2Ryb3AnLCBmdW5jdGlvbiAoZWwsIHRhcmdldCwgc291cmNlLCBzaWJsaW5nKSB7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLW1vdmluZycpXHJcbiAgICAgICAgICAgIHNlbGYub3B0aW9ucy5kcm9wQm9hcmQoZWwsIHRhcmdldCwgc291cmNlLCBzaWJsaW5nKVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGVsLmRyb3BmbiA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICBlbC5kcm9wZm4oZWwsIHRhcmdldCwgc291cmNlLCBzaWJsaW5nKVxyXG4gICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy9Jbml0IERyYWcgSXRlbVxyXG4gICAgICAgIHNlbGYuZHJha2UgPSBzZWxmXHJcbiAgICAgICAgICAuZHJhZ3VsYShzZWxmLmJvYXJkQ29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgIG1vdmVzOiBmdW5jdGlvbiAoZWwsIHNvdXJjZSwgaGFuZGxlLCBzaWJsaW5nKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19nZXRDYW5Nb3ZlKGhhbmRsZSlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmV2ZXJ0T25TcGlsbDogdHJ1ZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5vbignY2FuY2VsJywgZnVuY3Rpb24gKGVsLCBjb250YWluZXIsIHNvdXJjZSkge1xyXG4gICAgICAgICAgICBzZWxmLmVuYWJsZUFsbEJvYXJkcygpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLm9uKCdkcmFnJywgZnVuY3Rpb24gKGVsLCBzb3VyY2UpIHtcclxuICAgICAgICAgICAgdmFyIGVsQ2xhc3MgPSBlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJylcclxuICAgICAgICAgICAgaWYgKGVsQ2xhc3MgIT09ICcnICYmIGVsQ2xhc3MuaW5kZXhPZignbm90LWRyYWdnYWJsZScpID4gLTEpIHtcclxuICAgICAgICAgICAgICBzZWxmLmRyYWtlLmNhbmNlbCh0cnVlKVxyXG4gICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdpcy1tb3ZpbmcnKVxyXG5cclxuICAgICAgICAgICAgc2VsZi5vcHRpb25zLmRyYWdFbChlbCwgc291cmNlKVxyXG5cclxuICAgICAgICAgICAgdmFyIGJvYXJkSlNPTiA9IF9fZmluZEJvYXJkSlNPTihzb3VyY2UucGFyZW50Tm9kZS5kYXRhc2V0LmlkKVxyXG4gICAgICAgICAgICBpZiAoYm9hcmRKU09OLmRyYWdUbyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgc2VsZi5vcHRpb25zLmJvYXJkcy5tYXAoZnVuY3Rpb24gKGJvYXJkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgIGJvYXJkSlNPTi5kcmFnVG8uaW5kZXhPZihib2FyZC5pZCkgPT09IC0xICYmXHJcbiAgICAgICAgICAgICAgICAgIGJvYXJkLmlkICE9PSBzb3VyY2UucGFyZW50Tm9kZS5kYXRhc2V0LmlkXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgc2VsZi5maW5kQm9hcmQoYm9hcmQuaWQpLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkLWJvYXJkJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZWwgIT09IG51bGwgJiYgdHlwZW9mIGVsLmRyYWdmbiA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICBlbC5kcmFnZm4oZWwsIHNvdXJjZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAub24oJ2RyYWdlbmQnLCBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgc2VsZi5vcHRpb25zLmRyYWdlbmRFbChlbClcclxuICAgICAgICAgICAgaWYgKGVsICE9PSBudWxsICYmIHR5cGVvZiBlbC5kcmFnZW5kZm4gPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgICAgICAgZWwuZHJhZ2VuZGZuKGVsKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5vbignZHJvcCcsIGZ1bmN0aW9uIChlbCwgdGFyZ2V0LCBzb3VyY2UsIHNpYmxpbmcpIHtcclxuICAgICAgICAgICAgc2VsZi5lbmFibGVBbGxCb2FyZHMoKVxyXG5cclxuICAgICAgICAgICAgdmFyIGJvYXJkSlNPTiA9IF9fZmluZEJvYXJkSlNPTihzb3VyY2UucGFyZW50Tm9kZS5kYXRhc2V0LmlkKVxyXG4gICAgICAgICAgICBpZiAoYm9hcmRKU09OLmRyYWdUbyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgYm9hcmRKU09OLmRyYWdUby5pbmRleE9mKHRhcmdldC5wYXJlbnROb2RlLmRhdGFzZXQuaWQpID09PSAtMSAmJlxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnBhcmVudE5vZGUuZGF0YXNldC5pZCAhPT0gc291cmNlLnBhcmVudE5vZGUuZGF0YXNldC5pZFxyXG4gICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kcmFrZS5jYW5jZWwodHJ1ZSlcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHNlbGYub3B0aW9ucy5kcm9wRWwoZWwsIHRhcmdldCwgc291cmNlLCBzaWJsaW5nKVxyXG4gICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmRyYWtlLmNhbmNlbCh0cnVlKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1tb3ZpbmcnKVxyXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZWwuZHJvcGZuID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgZWwuZHJvcGZuKGVsLCB0YXJnZXQsIHNvdXJjZSwgc2libGluZylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZW5hYmxlQWxsQm9hcmRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgYWxsQiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5rYW5iYW4tYm9hcmQnKVxyXG4gICAgICBpZiAoYWxsQi5sZW5ndGggPiAwICYmIGFsbEIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsQi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgYWxsQltpXS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZC1ib2FyZCcpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hZGRFbGVtZW50ID0gZnVuY3Rpb24gKGJvYXJkSUQsIGVsZW1lbnQpIHtcclxuICAgICAgdmFyIGJvYXJkID0gc2VsZi5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgJ1tkYXRhLWlkPVwiJyArIGJvYXJkSUQgKyAnXCJdIC5rYW5iYW4tZHJhZydcclxuICAgICAgKVxyXG4gICAgICB2YXIgbm9kZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICBub2RlSXRlbS5jbGFzc0xpc3QuYWRkKCdrYW5iYW4taXRlbScpXHJcbiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5pZCAhPT0gJ3VuZGVmaW5lZCcgJiYgZWxlbWVudC5pZCAhPT0gJycpIHtcclxuICAgICAgICBub2RlSXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtZWlkJywgZWxlbWVudC5pZClcclxuICAgICAgfVxyXG4gICAgICBpZiAoZWxlbWVudC5jbGFzcyAmJiBBcnJheS5pc0FycmF5KGVsZW1lbnQuY2xhc3MpKSB7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzcy5mb3JFYWNoKGZ1bmN0aW9uIChjbCkge1xyXG4gICAgICAgICAgbm9kZUl0ZW0uY2xhc3NMaXN0LmFkZChjbClcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIG5vZGVJdGVtLmlubmVySFRNTCA9IF9fYnVpbGRJdGVtVGl0bGUoZWxlbWVudC50aXRsZSlcclxuICAgICAgLy9hZGQgZnVuY3Rpb25cclxuICAgICAgbm9kZUl0ZW0uY2xpY2tmbiA9IGVsZW1lbnQuY2xpY2tcclxuICAgICAgbm9kZUl0ZW0uZHJhZ2ZuID0gZWxlbWVudC5kcmFnXHJcbiAgICAgIG5vZGVJdGVtLmRyYWdlbmRmbiA9IGVsZW1lbnQuZHJhZ2VuZFxyXG4gICAgICBub2RlSXRlbS5kcm9wZm4gPSBlbGVtZW50LmRyb3BcclxuICAgICAgX19hcHBlbmRDdXN0b21Qcm9wZXJ0aWVzKG5vZGVJdGVtLCBlbGVtZW50KVxyXG4gICAgICBfX29uY2xpY2tIYW5kbGVyKG5vZGVJdGVtKVxyXG4gICAgICBpZiAoc2VsZi5vcHRpb25zLml0ZW1IYW5kbGVPcHRpb25zLmVuYWJsZWQpIHtcclxuICAgICAgICBub2RlSXRlbS5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCdcclxuICAgICAgfVxyXG4gICAgICBib2FyZC5hcHBlbmRDaGlsZChub2RlSXRlbSlcclxuICAgICAgcmV0dXJuIHNlbGZcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFkZEZvcm0gPSBmdW5jdGlvbiAoYm9hcmRJRCwgZm9ybUl0ZW0pIHtcclxuICAgICAgdmFyIGJvYXJkID0gc2VsZi5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgJ1tkYXRhLWlkPVwiJyArIGJvYXJkSUQgKyAnXCJdIC5rYW5iYW4tZHJhZydcclxuICAgICAgKVxyXG4gICAgICB2YXIgX2F0dHJpYnV0ZSA9IGZvcm1JdGVtLmdldEF0dHJpYnV0ZSgnY2xhc3MnKVxyXG4gICAgICBmb3JtSXRlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgX2F0dHJpYnV0ZSArICcgbm90LWRyYWdnYWJsZScpXHJcbiAgICAgIGJvYXJkLmFwcGVuZENoaWxkKGZvcm1JdGVtKVxyXG4gICAgICByZXR1cm4gc2VsZlxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYWRkQm9hcmRzID0gZnVuY3Rpb24gKGJvYXJkcywgaXNJbml0KSB7XHJcbiAgICAgIGlmIChzZWxmLm9wdGlvbnMucmVzcG9uc2l2ZVBlcmNlbnRhZ2UpIHtcclxuICAgICAgICBzZWxmLmNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJ1xyXG4gICAgICAgIHNlbGYub3B0aW9ucy5ndXR0ZXIgPSAnMSUnXHJcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gc2VsZi5vcHRpb25zLnJlc3BvbnNpdmUpIHtcclxuICAgICAgICAgIHZhciBib2FyZFdpZHRoID0gKDEwMCAtIGJvYXJkcy5sZW5ndGggKiAyKSAvIGJvYXJkcy5sZW5ndGhcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFyIGJvYXJkV2lkdGggPSAxMDAgLSBib2FyZHMubGVuZ3RoICogMlxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgYm9hcmRXaWR0aCA9IHNlbGYub3B0aW9ucy53aWR0aEJvYXJkXHJcbiAgICAgIH1cclxuICAgICAgdmFyIGFkZEJ1dHRvbiA9IHNlbGYub3B0aW9ucy5pdGVtQWRkT3B0aW9ucy5lbmFibGVkXHJcbiAgICAgIHZhciBidXR0b25Db250ZW50ID0gc2VsZi5vcHRpb25zLml0ZW1BZGRPcHRpb25zLmNvbnRlbnRcclxuICAgICAgdmFyIGJ1dHRvbkNsYXNzID0gc2VsZi5vcHRpb25zLml0ZW1BZGRPcHRpb25zLmNsYXNzXHJcbiAgICAgIHZhciBidXR0b25Gb290ZXIgPSBzZWxmLm9wdGlvbnMuaXRlbUFkZE9wdGlvbnMuZm9vdGVyXHJcblxyXG4gICAgICAvL2ZvciBvbiBhbGwgdGhlIGJvYXJkc1xyXG4gICAgICBmb3IgKHZhciBib2FyZGtleSBpbiBib2FyZHMpIHtcclxuICAgICAgICAvLyBzaW5nbGUgYm9hcmRcclxuICAgICAgICB2YXIgYm9hcmQgPSBib2FyZHNbYm9hcmRrZXldXHJcbiAgICAgICAgaWYgKCFpc0luaXQpIHtcclxuICAgICAgICAgIHNlbGYub3B0aW9ucy5ib2FyZHMucHVzaChib2FyZClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc2VsZi5vcHRpb25zLnJlc3BvbnNpdmVQZXJjZW50YWdlKSB7XHJcbiAgICAgICAgICAvL2FkZCB3aWR0aCB0byBjb250YWluZXJcclxuICAgICAgICAgIGlmIChzZWxmLmNvbnRhaW5lci5zdHlsZS53aWR0aCA9PT0gJycpIHtcclxuICAgICAgICAgICAgc2VsZi5jb250YWluZXIuc3R5bGUud2lkdGggPVxyXG4gICAgICAgICAgICAgIHBhcnNlSW50KGJvYXJkV2lkdGgpICsgcGFyc2VJbnQoc2VsZi5vcHRpb25zLmd1dHRlcikgKiAyICsgJ3B4J1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5jb250YWluZXIuc3R5bGUud2lkdGggPVxyXG4gICAgICAgICAgICAgIHBhcnNlSW50KHNlbGYuY29udGFpbmVyLnN0eWxlLndpZHRoKSArXHJcbiAgICAgICAgICAgICAgcGFyc2VJbnQoYm9hcmRXaWR0aCkgK1xyXG4gICAgICAgICAgICAgIHBhcnNlSW50KHNlbGYub3B0aW9ucy5ndXR0ZXIpICogMiArXHJcbiAgICAgICAgICAgICAgJ3B4J1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NyZWF0ZSBub2RlXHJcbiAgICAgICAgdmFyIGJvYXJkTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgYm9hcmROb2RlLmRhdGFzZXQuaWQgPSBib2FyZC5pZFxyXG4gICAgICAgIGJvYXJkTm9kZS5kYXRhc2V0Lm9yZGVyID0gc2VsZi5jb250YWluZXIuY2hpbGROb2Rlcy5sZW5ndGggKyAxXHJcbiAgICAgICAgYm9hcmROb2RlLmNsYXNzTGlzdC5hZGQoJ2thbmJhbi1ib2FyZCcpXHJcbiAgICAgICAgLy9zZXQgc3R5bGVcclxuICAgICAgICBpZiAoc2VsZi5vcHRpb25zLnJlc3BvbnNpdmVQZXJjZW50YWdlKSB7XHJcbiAgICAgICAgICBib2FyZE5vZGUuc3R5bGUud2lkdGggPSBib2FyZFdpZHRoICsgJyUnXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGJvYXJkTm9kZS5zdHlsZS53aWR0aCA9IGJvYXJkV2lkdGhcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9hcmROb2RlLnN0eWxlLm1hcmdpbkxlZnQgPSBzZWxmLm9wdGlvbnMuZ3V0dGVyXHJcbiAgICAgICAgYm9hcmROb2RlLnN0eWxlLm1hcmdpblJpZ2h0ID0gc2VsZi5vcHRpb25zLmd1dHRlclxyXG4gICAgICAgIC8vIGhlYWRlciBib2FyZFxyXG4gICAgICAgIHZhciBoZWFkZXJCb2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hlYWRlcicpXHJcbiAgICAgICAgaWYgKGJvYXJkLmNsYXNzICE9PSAnJyAmJiBib2FyZC5jbGFzcyAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgdmFyIGFsbENsYXNzZXMgPSBib2FyZC5jbGFzcy5zcGxpdCgnLCcpXHJcbiAgICAgICAgZWxzZSBhbGxDbGFzc2VzID0gW11cclxuICAgICAgICBoZWFkZXJCb2FyZC5jbGFzc0xpc3QuYWRkKCdrYW5iYW4tYm9hcmQtaGVhZGVyJylcclxuICAgICAgICBhbGxDbGFzc2VzLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgIC8vIFJlbW92ZSBlbXB0eSBzcGFjZXNcclxuICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXlsgXSsvZywgJycpXHJcbiAgICAgICAgICBoZWFkZXJCb2FyZC5jbGFzc0xpc3QuYWRkKHZhbHVlKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgaGVhZGVyQm9hcmQuaW5uZXJIVE1MID1cclxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwia2FuYmFuLXRpdGxlLWJvYXJkXCI+JyArIGJvYXJkLnRpdGxlICsgJzwvZGl2PidcclxuICAgICAgICAvL2NvbnRlbnQgYm9hcmRcclxuICAgICAgICB2YXIgY29udGVudEJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWFpbicpXHJcbiAgICAgICAgY29udGVudEJvYXJkLmNsYXNzTGlzdC5hZGQoJ2thbmJhbi1kcmFnJylcclxuICAgICAgICBpZiAoYm9hcmQuYm9keUNsYXNzICE9PSAnJyAmJiBib2FyZC5ib2R5Q2xhc3MgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgIHZhciBib2R5Q2xhc3NlcyA9IGJvYXJkLmJvZHlDbGFzcy5zcGxpdCgnLCcpXHJcbiAgICAgICAgZWxzZSBib2R5Q2xhc3NlcyA9IFtdXHJcbiAgICAgICAgYm9keUNsYXNzZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgY29udGVudEJvYXJkLmNsYXNzTGlzdC5hZGQodmFsdWUpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAvL2FkZCBkcmFnIHRvIGFycmF5IGZvciBkcmFndWxhXHJcbiAgICAgICAgc2VsZi5ib2FyZENvbnRhaW5lci5wdXNoKGNvbnRlbnRCb2FyZClcclxuICAgICAgICBmb3IgKHZhciBpdGVta2V5IGluIGJvYXJkLml0ZW0pIHtcclxuICAgICAgICAgIC8vY3JlYXRlIGl0ZW1cclxuICAgICAgICAgIHZhciBpdGVtS2FuYmFuID0gYm9hcmQuaXRlbVtpdGVta2V5XVxyXG4gICAgICAgICAgdmFyIG5vZGVJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgIG5vZGVJdGVtLmNsYXNzTGlzdC5hZGQoJ2thbmJhbi1pdGVtJylcclxuICAgICAgICAgIGlmIChpdGVtS2FuYmFuLmlkKSB7XHJcbiAgICAgICAgICAgIG5vZGVJdGVtLmRhdGFzZXQuZWlkID0gaXRlbUthbmJhbi5pZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGl0ZW1LYW5iYW4uY2xhc3MgJiYgQXJyYXkuaXNBcnJheShpdGVtS2FuYmFuLmNsYXNzKSkge1xyXG4gICAgICAgICAgICBpdGVtS2FuYmFuLmNsYXNzLmZvckVhY2goZnVuY3Rpb24gKGNsKSB7XHJcbiAgICAgICAgICAgICAgbm9kZUl0ZW0uY2xhc3NMaXN0LmFkZChjbClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5vZGVJdGVtLmlubmVySFRNTCA9IF9fYnVpbGRJdGVtVGl0bGUoaXRlbUthbmJhbi50aXRsZSlcclxuICAgICAgICAgIC8vYWRkIGZ1bmN0aW9uXHJcbiAgICAgICAgICBub2RlSXRlbS5jbGlja2ZuID0gaXRlbUthbmJhbi5jbGlja1xyXG4gICAgICAgICAgbm9kZUl0ZW0uZHJhZ2ZuID0gaXRlbUthbmJhbi5kcmFnXHJcbiAgICAgICAgICBub2RlSXRlbS5kcmFnZW5kZm4gPSBpdGVtS2FuYmFuLmRyYWdlbmRcclxuICAgICAgICAgIG5vZGVJdGVtLmRyb3BmbiA9IGl0ZW1LYW5iYW4uZHJvcFxyXG4gICAgICAgICAgX19hcHBlbmRDdXN0b21Qcm9wZXJ0aWVzKG5vZGVJdGVtLCBpdGVtS2FuYmFuKVxyXG4gICAgICAgICAgLy9hZGQgY2xpY2sgaGFuZGxlciBvZiBpdGVtXHJcbiAgICAgICAgICBfX29uY2xpY2tIYW5kbGVyKG5vZGVJdGVtKVxyXG4gICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5pdGVtSGFuZGxlT3B0aW9ucy5lbmFibGVkKSB7XHJcbiAgICAgICAgICAgIG5vZGVJdGVtLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0J1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29udGVudEJvYXJkLmFwcGVuZENoaWxkKG5vZGVJdGVtKVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL2Zvb3RlciBib2FyZFxyXG4gICAgICAgIHZhciBmb290ZXJCb2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvb3RlcicpXHJcbiAgICAgICAgLy8gaWYgYWRkIGJ1dHRvbiBpcyB0cnVlLCBhZGQgYnV0dG9uIHRvIHRoZSBib2FyZFxyXG4gICAgICAgIGlmIChhZGRCdXR0b24pIHtcclxuICAgICAgICAgIHZhciBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdCVVRUT04nKVxyXG4gICAgICAgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShidXR0b25Db250ZW50ID8gYnV0dG9uQ29udGVudCA6ICcrJylcclxuICAgICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICAgICdjbGFzcycsXHJcbiAgICAgICAgICAgIGJ1dHRvbkNsYXNzID8gYnV0dG9uQ2xhc3MgOiAna2FuYmFuLXRpdGxlLWJ1dHRvbiBidG4gYnRuLWRlZmF1bHQgYnRuLXhzJ1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgYnRuLmFwcGVuZENoaWxkKHQpXHJcbiAgICAgICAgICAvL3ZhciBidXR0b25IdG1sID0gJzxidXR0b24gY2xhc3M9XCJrYW5iYW4tdGl0bGUtYnV0dG9uIGJ0biBidG4tZGVmYXVsdCBidG4teHNcIj4nK2J1dHRvbkNvbnRlbnQrJzwvYnV0dG9uPidcclxuICAgICAgICAgIGlmIChidXR0b25Gb290ZXIpIHtcclxuICAgICAgICAgICAgZm9vdGVyQm9hcmQuYXBwZW5kQ2hpbGQoYnRuKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaGVhZGVyQm9hcmQuYXBwZW5kQ2hpbGQoYnRuKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgX19vbkJ1dHRvbkNsaWNrSGFuZGxlcihidG4sIGJvYXJkLmlkKVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL2JvYXJkIGFzc2VtYmx5XHJcbiAgICAgICAgYm9hcmROb2RlLmFwcGVuZENoaWxkKGhlYWRlckJvYXJkKVxyXG4gICAgICAgIGJvYXJkTm9kZS5hcHBlbmRDaGlsZChjb250ZW50Qm9hcmQpXHJcbiAgICAgICAgYm9hcmROb2RlLmFwcGVuZENoaWxkKGZvb3RlckJvYXJkKVxyXG4gICAgICAgIC8vYm9hcmQgYWRkXHJcbiAgICAgICAgc2VsZi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm9hcmROb2RlKVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZWxmXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5maW5kQm9hcmQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgdmFyIGVsID0gc2VsZi5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpXHJcbiAgICAgIHJldHVybiBlbFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZ2V0UGFyZW50Qm9hcmRJRCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGVsID0gc2VsZi5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWVpZD1cIicgKyBlbCArICdcIl0nKVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChlbCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGVsLnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0LmlkXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5tb3ZlRWxlbWVudCA9IGZ1bmN0aW9uICh0YXJnZXRCb2FyZElELCBlbGVtZW50SUQsIGVsZW1lbnQpIHtcclxuICAgICAgaWYgKHRhcmdldEJvYXJkSUQgPT09IHRoaXMuZ2V0UGFyZW50Qm9hcmRJRChlbGVtZW50SUQpKSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucmVtb3ZlRWxlbWVudChlbGVtZW50SUQpXHJcbiAgICAgIHJldHVybiB0aGlzLmFkZEVsZW1lbnQodGFyZ2V0Qm9hcmRJRCwgZWxlbWVudClcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlcGxhY2VFbGVtZW50ID0gZnVuY3Rpb24gKGVsLCBlbGVtZW50KSB7XHJcbiAgICAgIHZhciBub2RlSXRlbSA9IGVsXHJcbiAgICAgIGlmICh0eXBlb2Ygbm9kZUl0ZW0gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgbm9kZUl0ZW0gPSBzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtZWlkPVwiJyArIGVsICsgJ1wiXScpXHJcbiAgICAgIH1cclxuICAgICAgbm9kZUl0ZW0uaW5uZXJIVE1MID0gZWxlbWVudC50aXRsZVxyXG4gICAgICAvLyBhZGQgZnVuY3Rpb25cclxuICAgICAgbm9kZUl0ZW0uY2xpY2tmbiA9IGVsZW1lbnQuY2xpY2tcclxuICAgICAgbm9kZUl0ZW0uZHJhZ2ZuID0gZWxlbWVudC5kcmFnXHJcbiAgICAgIG5vZGVJdGVtLmRyYWdlbmRmbiA9IGVsZW1lbnQuZHJhZ2VuZFxyXG4gICAgICBub2RlSXRlbS5kcm9wZm4gPSBlbGVtZW50LmRyb3BcclxuICAgICAgX19hcHBlbmRDdXN0b21Qcm9wZXJ0aWVzKG5vZGVJdGVtLCBlbGVtZW50KVxyXG4gICAgICByZXR1cm4gc2VsZlxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZmluZEVsZW1lbnQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgdmFyIGVsID0gc2VsZi5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWVpZD1cIicgKyBpZCArICdcIl0nKVxyXG4gICAgICByZXR1cm4gZWxcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdldEJvYXJkRWxlbWVudHMgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgdmFyIGJvYXJkID0gc2VsZi5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgJ1tkYXRhLWlkPVwiJyArIGlkICsgJ1wiXSAua2FuYmFuLWRyYWcnXHJcbiAgICAgIClcclxuICAgICAgcmV0dXJuIGJvYXJkLmNoaWxkTm9kZXNcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpXHJcbiAgICAgICAgZWwgPSBzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtZWlkPVwiJyArIGVsICsgJ1wiXScpXHJcbiAgICAgIGlmIChlbCAhPT0gbnVsbCkge1xyXG4gICAgICAgIC8vZmFsbGJhY2sgZm9yIElFXHJcbiAgICAgICAgaWYgKHR5cGVvZiBlbC5yZW1vdmUgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgZWwucmVtb3ZlKClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlbGZcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlbW92ZUJvYXJkID0gZnVuY3Rpb24gKGJvYXJkKSB7XHJcbiAgICAgIHZhciBib2FyZEVsZW1lbnQgPSBudWxsXHJcbiAgICAgIGlmICh0eXBlb2YgYm9hcmQgPT09ICdzdHJpbmcnKVxyXG4gICAgICAgIGJvYXJkRWxlbWVudCA9IHNlbGYuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyBib2FyZCArICdcIl0nKVxyXG4gICAgICBpZiAoYm9hcmRFbGVtZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgLy9mYWxsYmFjayBmb3IgSUVcclxuICAgICAgICBpZiAodHlwZW9mIGJvYXJkRWxlbWVudC5yZW1vdmUgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgYm9hcmRFbGVtZW50LnJlbW92ZSgpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGJvYXJkRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJvYXJkRWxlbWVudClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHJlbW92ZSB0aGJvYXJkIGluIG9wdGlvbnMuYm9hcmRzXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5vcHRpb25zLmJvYXJkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMuYm9hcmRzW2ldLmlkID09PSBib2FyZCkge1xyXG4gICAgICAgICAgc2VsZi5vcHRpb25zLmJvYXJkcy5zcGxpY2UoaSwgMSlcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gc2VsZlxyXG4gICAgfVxyXG5cclxuICAgIC8vIGJvYXJkIGJ1dHRvbiBvbiBjbGljayBmdW5jdGlvblxyXG4gICAgdGhpcy5vbkJ1dHRvbkNsaWNrID0gZnVuY3Rpb24gKGVsKSB7fVxyXG5cclxuICAgIC8vUFJJVkFURSBGVU5DVElPTlxyXG4gICAgZnVuY3Rpb24gX19leHRlbmREZWZhdWx0cyAoc291cmNlLCBwcm9wZXJ0aWVzKSB7XHJcbiAgICAgIHZhciBwcm9wZXJ0eVxyXG4gICAgICBmb3IgKHByb3BlcnR5IGluIHByb3BlcnRpZXMpIHtcclxuICAgICAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgIHNvdXJjZVtwcm9wZXJ0eV0gPSBwcm9wZXJ0aWVzW3Byb3BlcnR5XVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc291cmNlXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX19zZXRCb2FyZCAoKSB7XHJcbiAgICAgIHNlbGYuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZi5vcHRpb25zLmVsZW1lbnQpXHJcbiAgICAgIC8vY3JlYXRlIGNvbnRhaW5lclxyXG4gICAgICB2YXIgYm9hcmRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICBib2FyZENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdrYW5iYW4tY29udGFpbmVyJylcclxuICAgICAgc2VsZi5jb250YWluZXIgPSBib2FyZENvbnRhaW5lclxyXG4gICAgICAvL2FkZCBib2FyZHNcclxuXHJcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGYub3B0aW9ucy5lbGVtZW50KS5kYXRhc2V0Lmhhc093blByb3BlcnR5KCdib2FyZCcpKSB7XHJcbiAgICAgICAgdXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxmLm9wdGlvbnMuZWxlbWVudCkuZGF0YXNldC5ib2FyZFxyXG4gICAgICAgIHdpbmRvdy5mZXRjaCh1cmwsIHtcclxuICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgLy8gbG9nIHJlc3BvbnNlIHRleHRcclxuICAgICAgICAgICAgcmVzcG9uc2UuanNvbigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICBzZWxmLm9wdGlvbnMuYm9hcmRzID0gZGF0YVxyXG4gICAgICAgICAgICAgIHNlbGYuYWRkQm9hcmRzKHNlbGYub3B0aW9ucy5ib2FyZHMsIHRydWUpXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOiAnLCBlcnJvcilcclxuICAgICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VsZi5hZGRCb2FyZHMoc2VsZi5vcHRpb25zLmJvYXJkcywgdHJ1ZSlcclxuICAgICAgfVxyXG5cclxuICAgICAgLy9hcHBlbmRzIHRvIGNvbnRhaW5lclxyXG4gICAgICBzZWxmLmVsZW1lbnQuYXBwZW5kQ2hpbGQoc2VsZi5jb250YWluZXIpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX19vbmNsaWNrSGFuZGxlciAobm9kZUl0ZW0sIGNsaWNrZm4pIHtcclxuICAgICAgbm9kZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgIHNlbGYub3B0aW9ucy5jbGljayh0aGlzKVxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5jbGlja2ZuID09PSAnZnVuY3Rpb24nKSB0aGlzLmNsaWNrZm4odGhpcylcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfX29uQnV0dG9uQ2xpY2tIYW5kbGVyIChub2RlSXRlbSwgYm9hcmRJZCkge1xyXG4gICAgICBub2RlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgc2VsZi5vcHRpb25zLmJ1dHRvbkNsaWNrKHRoaXMsIGJvYXJkSWQpXHJcbiAgICAgICAgLy8gaWYodHlwZW9mKHRoaXMuY2xpY2tmbikgPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgLy8gICAgIHRoaXMuY2xpY2tmbih0aGlzKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfX2ZpbmRCb2FyZEpTT04gKGlkKSB7XHJcbiAgICAgIHZhciBlbCA9IFtdXHJcbiAgICAgIHNlbGYub3B0aW9ucy5ib2FyZHMubWFwKGZ1bmN0aW9uIChib2FyZCkge1xyXG4gICAgICAgIGlmIChib2FyZC5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgIHJldHVybiBlbC5wdXNoKGJvYXJkKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuIGVsWzBdXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX19hcHBlbmRDdXN0b21Qcm9wZXJ0aWVzIChlbGVtZW50LCBwYXJlbnRPYmplY3QpIHtcclxuICAgICAgZm9yICh2YXIgcHJvcGVydHlOYW1lIGluIHBhcmVudE9iamVjdCkge1xyXG4gICAgICAgIGlmIChzZWxmLl9kaXNhbGxvd2VkSXRlbVByb3BlcnRpZXMuaW5kZXhPZihwcm9wZXJ0eU5hbWUpID4gLTEpIHtcclxuICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcclxuICAgICAgICAgICdkYXRhLScgKyBwcm9wZXJ0eU5hbWUsXHJcbiAgICAgICAgICBwYXJlbnRPYmplY3RbcHJvcGVydHlOYW1lXVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9fdXBkYXRlQm9hcmRzT3JkZXIgKCkge1xyXG4gICAgICB2YXIgaW5kZXggPSAxXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5jb250YWluZXIuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHNlbGYuY29udGFpbmVyLmNoaWxkTm9kZXNbaV0uZGF0YXNldC5vcmRlciA9IGluZGV4KytcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9fYnVpbGRJdGVtVGl0bGUgKHRpdGxlKSB7XHJcbiAgICAgIHZhciByZXN1bHQgPSB0aXRsZVxyXG4gICAgICBpZiAoc2VsZi5vcHRpb25zLml0ZW1IYW5kbGVPcHRpb25zLmVuYWJsZWQpIHtcclxuICAgICAgICBpZiAoKHNlbGYub3B0aW9ucy5pdGVtSGFuZGxlT3B0aW9ucy5jdXN0b21IYW5kbGVyIHx8IHVuZGVmaW5lZCkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgdmFyIGN1c3RvbUNzc0hhbmRsZXIgPSBzZWxmLm9wdGlvbnMuaXRlbUhhbmRsZU9wdGlvbnMuY3VzdG9tQ3NzSGFuZGxlclxyXG4gICAgICAgICAgdmFyIGN1c3RvbUNzc0ljb25IYW5kbGVyID0gc2VsZi5vcHRpb25zLml0ZW1IYW5kbGVPcHRpb25zLmN1c3RvbUNzc0ljb25IYW5kbGVyXHJcbiAgICAgICAgICBpZiAoKGN1c3RvbUNzc0hhbmRsZXIgfHwgdW5kZWZpbmVkKSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUNzc0hhbmRsZXIgPSAnZHJhZ19oYW5kbGVyJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKChjdXN0b21Dc3NJY29uSGFuZGxlciB8fCB1bmRlZmluZWQpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY3VzdG9tQ3NzSWNvbkhhbmRsZXIgPSBjdXN0b21Dc3NIYW5kbGVyICsgJ19pY29uJ1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJlc3VsdCA9ICc8ZGl2IGNsYXNzPVxcJ2l0ZW1faGFuZGxlICcgKyBjdXN0b21Dc3NIYW5kbGVyICsgJ1xcJz48aSBjbGFzcz1cXCdpdGVtX2hhbmRsZSAnICsgY3VzdG9tQ3NzSWNvbkhhbmRsZXIgKyAnXFwnPjwvaT48L2Rpdj48ZGl2PicgKyByZXN1bHQgKyAnPC9kaXY+J1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXN1bHQgPSBzZWxmLm9wdGlvbnMuaXRlbUhhbmRsZU9wdGlvbnMuY3VzdG9tSGFuZGxlci5yZXBsYWNlKCclcycsIHJlc3VsdClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG5cclxuICAgIC8vaW5pdCBwbHVnaW5cclxuICAgIHRoaXMuaW5pdCgpXHJcbiAgfVxyXG59KSgpXHJcblxyXG59LHtcImRyYWd1bGFcIjo5fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYXRvYSAoYSwgbikgeyByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwgbik7IH1cclxuXHJcbn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG52YXIgdGlja3kgPSByZXF1aXJlKCd0aWNreScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWJvdW5jZSAoZm4sIGFyZ3MsIGN0eCkge1xyXG4gIGlmICghZm4pIHsgcmV0dXJuOyB9XHJcbiAgdGlja3koZnVuY3Rpb24gcnVuICgpIHtcclxuICAgIGZuLmFwcGx5KGN0eCB8fCBudWxsLCBhcmdzIHx8IFtdKTtcclxuICB9KTtcclxufTtcclxuXHJcbn0se1widGlja3lcIjoxMX1dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG52YXIgYXRvYSA9IHJlcXVpcmUoJ2F0b2EnKTtcclxudmFyIGRlYm91bmNlID0gcmVxdWlyZSgnLi9kZWJvdW5jZScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbWl0dGVyICh0aGluZywgb3B0aW9ucykge1xyXG4gIHZhciBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuICB2YXIgZXZ0ID0ge307XHJcbiAgaWYgKHRoaW5nID09PSB1bmRlZmluZWQpIHsgdGhpbmcgPSB7fTsgfVxyXG4gIHRoaW5nLm9uID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XHJcbiAgICBpZiAoIWV2dFt0eXBlXSkge1xyXG4gICAgICBldnRbdHlwZV0gPSBbZm5dO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXZ0W3R5cGVdLnB1c2goZm4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaW5nO1xyXG4gIH07XHJcbiAgdGhpbmcub25jZSA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xyXG4gICAgZm4uX29uY2UgPSB0cnVlOyAvLyB0aGluZy5vZmYoZm4pIHN0aWxsIHdvcmtzIVxyXG4gICAgdGhpbmcub24odHlwZSwgZm4pO1xyXG4gICAgcmV0dXJuIHRoaW5nO1xyXG4gIH07XHJcbiAgdGhpbmcub2ZmID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGg7XHJcbiAgICBpZiAoYyA9PT0gMSkge1xyXG4gICAgICBkZWxldGUgZXZ0W3R5cGVdO1xyXG4gICAgfSBlbHNlIGlmIChjID09PSAwKSB7XHJcbiAgICAgIGV2dCA9IHt9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFyIGV0ID0gZXZ0W3R5cGVdO1xyXG4gICAgICBpZiAoIWV0KSB7IHJldHVybiB0aGluZzsgfVxyXG4gICAgICBldC5zcGxpY2UoZXQuaW5kZXhPZihmbiksIDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaW5nO1xyXG4gIH07XHJcbiAgdGhpbmcuZW1pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhcmdzID0gYXRvYShhcmd1bWVudHMpO1xyXG4gICAgcmV0dXJuIHRoaW5nLmVtaXR0ZXJTbmFwc2hvdChhcmdzLnNoaWZ0KCkpLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gIH07XHJcbiAgdGhpbmcuZW1pdHRlclNuYXBzaG90ID0gZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgIHZhciBldCA9IChldnRbdHlwZV0gfHwgW10pLnNsaWNlKDApO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XHJcbiAgICAgIHZhciBjdHggPSB0aGlzIHx8IHRoaW5nO1xyXG4gICAgICBpZiAodHlwZSA9PT0gJ2Vycm9yJyAmJiBvcHRzLnRocm93cyAhPT0gZmFsc2UgJiYgIWV0Lmxlbmd0aCkgeyB0aHJvdyBhcmdzLmxlbmd0aCA9PT0gMSA/IGFyZ3NbMF0gOiBhcmdzOyB9XHJcbiAgICAgIGV0LmZvckVhY2goZnVuY3Rpb24gZW1pdHRlciAobGlzdGVuKSB7XHJcbiAgICAgICAgaWYgKG9wdHMuYXN5bmMpIHsgZGVib3VuY2UobGlzdGVuLCBhcmdzLCBjdHgpOyB9IGVsc2UgeyBsaXN0ZW4uYXBwbHkoY3R4LCBhcmdzKTsgfVxyXG4gICAgICAgIGlmIChsaXN0ZW4uX29uY2UpIHsgdGhpbmcub2ZmKHR5cGUsIGxpc3Rlbik7IH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiB0aGluZztcclxuICAgIH07XHJcbiAgfTtcclxuICByZXR1cm4gdGhpbmc7XHJcbn07XHJcblxyXG59LHtcIi4vZGVib3VuY2VcIjozLFwiYXRvYVwiOjJ9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcclxuKGZ1bmN0aW9uIChnbG9iYWwpeyhmdW5jdGlvbiAoKXtcclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGN1c3RvbUV2ZW50ID0gcmVxdWlyZSgnY3VzdG9tLWV2ZW50Jyk7XHJcbnZhciBldmVudG1hcCA9IHJlcXVpcmUoJy4vZXZlbnRtYXAnKTtcclxudmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcclxudmFyIGFkZEV2ZW50ID0gYWRkRXZlbnRFYXN5O1xyXG52YXIgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEVhc3k7XHJcbnZhciBoYXJkQ2FjaGUgPSBbXTtcclxuXHJcbmlmICghZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICBhZGRFdmVudCA9IGFkZEV2ZW50SGFyZDtcclxuICByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50SGFyZDtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgYWRkOiBhZGRFdmVudCxcclxuICByZW1vdmU6IHJlbW92ZUV2ZW50LFxyXG4gIGZhYnJpY2F0ZTogZmFicmljYXRlRXZlbnRcclxufTtcclxuXHJcbmZ1bmN0aW9uIGFkZEV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcclxuICByZXR1cm4gZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcclxuICByZXR1cm4gZWwuYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIHdyYXAoZWwsIHR5cGUsIGZuKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcclxuICByZXR1cm4gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcclxuICB2YXIgbGlzdGVuZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKTtcclxuICBpZiAobGlzdGVuZXIpIHtcclxuICAgIHJldHVybiBlbC5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgbGlzdGVuZXIpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZmFicmljYXRlRXZlbnQgKGVsLCB0eXBlLCBtb2RlbCkge1xyXG4gIHZhciBlID0gZXZlbnRtYXAuaW5kZXhPZih0eXBlKSA9PT0gLTEgPyBtYWtlQ3VzdG9tRXZlbnQoKSA6IG1ha2VDbGFzc2ljRXZlbnQoKTtcclxuICBpZiAoZWwuZGlzcGF0Y2hFdmVudCkge1xyXG4gICAgZWwuZGlzcGF0Y2hFdmVudChlKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZWwuZmlyZUV2ZW50KCdvbicgKyB0eXBlLCBlKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gbWFrZUNsYXNzaWNFdmVudCAoKSB7XHJcbiAgICB2YXIgZTtcclxuICAgIGlmIChkb2MuY3JlYXRlRXZlbnQpIHtcclxuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudCgnRXZlbnQnKTtcclxuICAgICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKGRvYy5jcmVhdGVFdmVudE9iamVjdCkge1xyXG4gICAgICBlID0gZG9jLmNyZWF0ZUV2ZW50T2JqZWN0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZTtcclxuICB9XHJcbiAgZnVuY3Rpb24gbWFrZUN1c3RvbUV2ZW50ICgpIHtcclxuICAgIHJldHVybiBuZXcgY3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IG1vZGVsIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gd3JhcHBlckZhY3RvcnkgKGVsLCB0eXBlLCBmbikge1xyXG4gIHJldHVybiBmdW5jdGlvbiB3cmFwcGVyIChvcmlnaW5hbEV2ZW50KSB7XHJcbiAgICB2YXIgZSA9IG9yaWdpbmFsRXZlbnQgfHwgZ2xvYmFsLmV2ZW50O1xyXG4gICAgZS50YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0ID0gZS5wcmV2ZW50RGVmYXVsdCB8fCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdCAoKSB7IGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgfTtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uID0gZS5zdG9wUHJvcGFnYXRpb24gfHwgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHsgZS5jYW5jZWxCdWJibGUgPSB0cnVlOyB9O1xyXG4gICAgZS53aGljaCA9IGUud2hpY2ggfHwgZS5rZXlDb2RlO1xyXG4gICAgZm4uY2FsbChlbCwgZSk7XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gd3JhcCAoZWwsIHR5cGUsIGZuKSB7XHJcbiAgdmFyIHdyYXBwZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKSB8fCB3cmFwcGVyRmFjdG9yeShlbCwgdHlwZSwgZm4pO1xyXG4gIGhhcmRDYWNoZS5wdXNoKHtcclxuICAgIHdyYXBwZXI6IHdyYXBwZXIsXHJcbiAgICBlbGVtZW50OiBlbCxcclxuICAgIHR5cGU6IHR5cGUsXHJcbiAgICBmbjogZm5cclxuICB9KTtcclxuICByZXR1cm4gd3JhcHBlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gdW53cmFwIChlbCwgdHlwZSwgZm4pIHtcclxuICB2YXIgaSA9IGZpbmQoZWwsIHR5cGUsIGZuKTtcclxuICBpZiAoaSkge1xyXG4gICAgdmFyIHdyYXBwZXIgPSBoYXJkQ2FjaGVbaV0ud3JhcHBlcjtcclxuICAgIGhhcmRDYWNoZS5zcGxpY2UoaSwgMSk7IC8vIGZyZWUgdXAgYSB0YWQgb2YgbWVtb3J5XHJcbiAgICByZXR1cm4gd3JhcHBlcjtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbmQgKGVsLCB0eXBlLCBmbikge1xyXG4gIHZhciBpLCBpdGVtO1xyXG4gIGZvciAoaSA9IDA7IGkgPCBoYXJkQ2FjaGUubGVuZ3RoOyBpKyspIHtcclxuICAgIGl0ZW0gPSBoYXJkQ2FjaGVbaV07XHJcbiAgICBpZiAoaXRlbS5lbGVtZW50ID09PSBlbCAmJiBpdGVtLnR5cGUgPT09IHR5cGUgJiYgaXRlbS5mbiA9PT0gZm4pIHtcclxuICAgICAgcmV0dXJuIGk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG59KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXHJcbn0se1wiLi9ldmVudG1hcFwiOjYsXCJjdXN0b20tZXZlbnRcIjo3fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XHJcbihmdW5jdGlvbiAoZ2xvYmFsKXsoZnVuY3Rpb24gKCl7XHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBldmVudG1hcCA9IFtdO1xyXG52YXIgZXZlbnRuYW1lID0gJyc7XHJcbnZhciByb24gPSAvXm9uLztcclxuXHJcbmZvciAoZXZlbnRuYW1lIGluIGdsb2JhbCkge1xyXG4gIGlmIChyb24udGVzdChldmVudG5hbWUpKSB7XHJcbiAgICBldmVudG1hcC5wdXNoKGV2ZW50bmFtZS5zbGljZSgyKSk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGV2ZW50bWFwO1xyXG5cclxufSkuY2FsbCh0aGlzKX0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxyXG59LHt9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcclxuKGZ1bmN0aW9uIChnbG9iYWwpeyhmdW5jdGlvbiAoKXtcclxuXHJcbnZhciBOYXRpdmVDdXN0b21FdmVudCA9IGdsb2JhbC5DdXN0b21FdmVudDtcclxuXHJcbmZ1bmN0aW9uIHVzZU5hdGl2ZSAoKSB7XHJcbiAgdHJ5IHtcclxuICAgIHZhciBwID0gbmV3IE5hdGl2ZUN1c3RvbUV2ZW50KCdjYXQnLCB7IGRldGFpbDogeyBmb286ICdiYXInIH0gfSk7XHJcbiAgICByZXR1cm4gICdjYXQnID09PSBwLnR5cGUgJiYgJ2JhcicgPT09IHAuZGV0YWlsLmZvbztcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyb3NzLWJyb3dzZXIgYEN1c3RvbUV2ZW50YCBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50LkN1c3RvbUV2ZW50XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHVzZU5hdGl2ZSgpID8gTmF0aXZlQ3VzdG9tRXZlbnQgOlxyXG5cclxuLy8gSUUgPj0gOVxyXG4ndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGRvY3VtZW50ICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFdmVudCA/IGZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcclxuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xyXG4gIGlmIChwYXJhbXMpIHtcclxuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGZhbHNlLCBmYWxzZSwgdm9pZCAwKTtcclxuICB9XHJcbiAgcmV0dXJuIGU7XHJcbn0gOlxyXG5cclxuLy8gSUUgPD0gOFxyXG5mdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XHJcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xyXG4gIGUudHlwZSA9IHR5cGU7XHJcbiAgaWYgKHBhcmFtcykge1xyXG4gICAgZS5idWJibGVzID0gQm9vbGVhbihwYXJhbXMuYnViYmxlcyk7XHJcbiAgICBlLmNhbmNlbGFibGUgPSBCb29sZWFuKHBhcmFtcy5jYW5jZWxhYmxlKTtcclxuICAgIGUuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcclxuICB9IGVsc2Uge1xyXG4gICAgZS5idWJibGVzID0gZmFsc2U7XHJcbiAgICBlLmNhbmNlbGFibGUgPSBmYWxzZTtcclxuICAgIGUuZGV0YWlsID0gdm9pZCAwO1xyXG4gIH1cclxuICByZXR1cm4gZTtcclxufVxyXG5cclxufSkuY2FsbCh0aGlzKX0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxyXG59LHt9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGNhY2hlID0ge307XHJcbnZhciBzdGFydCA9ICcoPzpefFxcXFxzKSc7XHJcbnZhciBlbmQgPSAnKD86XFxcXHN8JCknO1xyXG5cclxuZnVuY3Rpb24gbG9va3VwQ2xhc3MgKGNsYXNzTmFtZSkge1xyXG4gIHZhciBjYWNoZWQgPSBjYWNoZVtjbGFzc05hbWVdO1xyXG4gIGlmIChjYWNoZWQpIHtcclxuICAgIGNhY2hlZC5sYXN0SW5kZXggPSAwO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjYWNoZVtjbGFzc05hbWVdID0gY2FjaGVkID0gbmV3IFJlZ0V4cChzdGFydCArIGNsYXNzTmFtZSArIGVuZCwgJ2cnKTtcclxuICB9XHJcbiAgcmV0dXJuIGNhY2hlZDtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcclxuICB2YXIgY3VycmVudCA9IGVsLmNsYXNzTmFtZTtcclxuICBpZiAoIWN1cnJlbnQubGVuZ3RoKSB7XHJcbiAgICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgfSBlbHNlIGlmICghbG9va3VwQ2xhc3MoY2xhc3NOYW1lKS50ZXN0KGN1cnJlbnQpKSB7XHJcbiAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcm1DbGFzcyAoZWwsIGNsYXNzTmFtZSkge1xyXG4gIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKGxvb2t1cENsYXNzKGNsYXNzTmFtZSksICcgJykudHJpbSgpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBhZGQ6IGFkZENsYXNzLFxyXG4gIHJtOiBybUNsYXNzXHJcbn07XHJcblxyXG59LHt9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcclxuKGZ1bmN0aW9uIChnbG9iYWwpeyhmdW5jdGlvbiAoKXtcclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGVtaXR0ZXIgPSByZXF1aXJlKCdjb250cmEvZW1pdHRlcicpO1xyXG52YXIgY3Jvc3N2ZW50ID0gcmVxdWlyZSgnY3Jvc3N2ZW50Jyk7XHJcbnZhciBjbGFzc2VzID0gcmVxdWlyZSgnLi9jbGFzc2VzJyk7XHJcbnZhciBkb2MgPSBkb2N1bWVudDtcclxudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XHJcblxyXG5mdW5jdGlvbiBkcmFndWxhIChpbml0aWFsQ29udGFpbmVycywgb3B0aW9ucykge1xyXG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xyXG4gIGlmIChsZW4gPT09IDEgJiYgQXJyYXkuaXNBcnJheShpbml0aWFsQ29udGFpbmVycykgPT09IGZhbHNlKSB7XHJcbiAgICBvcHRpb25zID0gaW5pdGlhbENvbnRhaW5lcnM7XHJcbiAgICBpbml0aWFsQ29udGFpbmVycyA9IFtdO1xyXG4gIH1cclxuICB2YXIgX21pcnJvcjsgLy8gbWlycm9yIGltYWdlXHJcbiAgdmFyIF9zb3VyY2U7IC8vIHNvdXJjZSBjb250YWluZXJcclxuICB2YXIgX2l0ZW07IC8vIGl0ZW0gYmVpbmcgZHJhZ2dlZFxyXG4gIHZhciBfb2Zmc2V0WDsgLy8gcmVmZXJlbmNlIHhcclxuICB2YXIgX29mZnNldFk7IC8vIHJlZmVyZW5jZSB5XHJcbiAgdmFyIF9tb3ZlWDsgLy8gcmVmZXJlbmNlIG1vdmUgeFxyXG4gIHZhciBfbW92ZVk7IC8vIHJlZmVyZW5jZSBtb3ZlIHlcclxuICB2YXIgX2luaXRpYWxTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyB3aGVuIGdyYWJiZWRcclxuICB2YXIgX2N1cnJlbnRTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyBub3dcclxuICB2YXIgX2NvcHk7IC8vIGl0ZW0gdXNlZCBmb3IgY29weWluZ1xyXG4gIHZhciBfcmVuZGVyVGltZXI7IC8vIHRpbWVyIGZvciBzZXRUaW1lb3V0IHJlbmRlck1pcnJvckltYWdlXHJcbiAgdmFyIF9sYXN0RHJvcFRhcmdldCA9IG51bGw7IC8vIGxhc3QgY29udGFpbmVyIGl0ZW0gd2FzIG92ZXJcclxuICB2YXIgX2dyYWJiZWQ7IC8vIGhvbGRzIG1vdXNlZG93biBjb250ZXh0IHVudGlsIGZpcnN0IG1vdXNlbW92ZVxyXG5cclxuICB2YXIgbyA9IG9wdGlvbnMgfHwge307XHJcbiAgaWYgKG8ubW92ZXMgPT09IHZvaWQgMCkgeyBvLm1vdmVzID0gYWx3YXlzOyB9XHJcbiAgaWYgKG8uYWNjZXB0cyA9PT0gdm9pZCAwKSB7IG8uYWNjZXB0cyA9IGFsd2F5czsgfVxyXG4gIGlmIChvLmludmFsaWQgPT09IHZvaWQgMCkgeyBvLmludmFsaWQgPSBpbnZhbGlkVGFyZ2V0OyB9XHJcbiAgaWYgKG8uY29udGFpbmVycyA9PT0gdm9pZCAwKSB7IG8uY29udGFpbmVycyA9IGluaXRpYWxDb250YWluZXJzIHx8IFtdOyB9XHJcbiAgaWYgKG8uaXNDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLmlzQ29udGFpbmVyID0gbmV2ZXI7IH1cclxuICBpZiAoby5jb3B5ID09PSB2b2lkIDApIHsgby5jb3B5ID0gZmFsc2U7IH1cclxuICBpZiAoby5jb3B5U29ydFNvdXJjZSA9PT0gdm9pZCAwKSB7IG8uY29weVNvcnRTb3VyY2UgPSBmYWxzZTsgfVxyXG4gIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJldmVydE9uU3BpbGwgPSBmYWxzZTsgfVxyXG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJlbW92ZU9uU3BpbGwgPSBmYWxzZTsgfVxyXG4gIGlmIChvLmRpcmVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uZGlyZWN0aW9uID0gJ3ZlcnRpY2FsJzsgfVxyXG4gIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID0gdHJ1ZTsgfVxyXG4gIGlmIChvLm1pcnJvckNvbnRhaW5lciA9PT0gdm9pZCAwKSB7IG8ubWlycm9yQ29udGFpbmVyID0gZG9jLmJvZHk7IH1cclxuXHJcbiAgdmFyIGRyYWtlID0gZW1pdHRlcih7XHJcbiAgICBjb250YWluZXJzOiBvLmNvbnRhaW5lcnMsXHJcbiAgICBzdGFydDogbWFudWFsU3RhcnQsXHJcbiAgICBlbmQ6IGVuZCxcclxuICAgIGNhbmNlbDogY2FuY2VsLFxyXG4gICAgcmVtb3ZlOiByZW1vdmUsXHJcbiAgICBkZXN0cm95OiBkZXN0cm95LFxyXG4gICAgY2FuTW92ZTogY2FuTW92ZSxcclxuICAgIGRyYWdnaW5nOiBmYWxzZVxyXG4gIH0pO1xyXG5cclxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB0cnVlKSB7XHJcbiAgICBkcmFrZS5vbignb3ZlcicsIHNwaWxsT3Zlcikub24oJ291dCcsIHNwaWxsT3V0KTtcclxuICB9XHJcblxyXG4gIGV2ZW50cygpO1xyXG5cclxuICByZXR1cm4gZHJha2U7XHJcblxyXG4gIGZ1bmN0aW9uIGlzQ29udGFpbmVyIChlbCkge1xyXG4gICAgcmV0dXJuIGRyYWtlLmNvbnRhaW5lcnMuaW5kZXhPZihlbCkgIT09IC0xIHx8IG8uaXNDb250YWluZXIoZWwpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZXZlbnRzIChyZW1vdmUpIHtcclxuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XHJcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNlZG93bicsIGdyYWIpO1xyXG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZXVwJywgcmVsZWFzZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBldmVudHVhbE1vdmVtZW50cyAocmVtb3ZlKSB7XHJcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xyXG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZW1vdmUnLCBzdGFydEJlY2F1c2VNb3VzZU1vdmVkKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG1vdmVtZW50cyAocmVtb3ZlKSB7XHJcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xyXG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdzZWxlY3RzdGFydCcsIHByZXZlbnRHcmFiYmVkKTsgLy8gSUU4XHJcbiAgICBjcm9zc3ZlbnRbb3BdKGRvY3VtZW50RWxlbWVudCwgJ2NsaWNrJywgcHJldmVudEdyYWJiZWQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZGVzdHJveSAoKSB7XHJcbiAgICBldmVudHModHJ1ZSk7XHJcbiAgICByZWxlYXNlKHt9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHByZXZlbnRHcmFiYmVkIChlKSB7XHJcbiAgICBpZiAoX2dyYWJiZWQpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ3JhYiAoZSkge1xyXG4gICAgX21vdmVYID0gZS5jbGllbnRYO1xyXG4gICAgX21vdmVZID0gZS5jbGllbnRZO1xyXG5cclxuICAgIHZhciBpZ25vcmUgPSB3aGljaE1vdXNlQnV0dG9uKGUpICE9PSAxIHx8IGUubWV0YUtleSB8fCBlLmN0cmxLZXk7XHJcbiAgICBpZiAoaWdub3JlKSB7XHJcbiAgICAgIHJldHVybjsgLy8gd2Ugb25seSBjYXJlIGFib3V0IGhvbmVzdC10by1nb2QgbGVmdCBjbGlja3MgYW5kIHRvdWNoIGV2ZW50c1xyXG4gICAgfVxyXG4gICAgdmFyIGl0ZW0gPSBlLnRhcmdldDtcclxuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XHJcbiAgICBpZiAoIWNvbnRleHQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX2dyYWJiZWQgPSBjb250ZXh0O1xyXG4gICAgZXZlbnR1YWxNb3ZlbWVudHMoKTtcclxuICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XHJcbiAgICAgIGlmIChpc0lucHV0KGl0ZW0pKSB7IC8vIHNlZSBhbHNvOiBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMjA4XHJcbiAgICAgICAgaXRlbS5mb2N1cygpOyAvLyBmaXhlcyBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMTc2XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBmaXhlcyBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMTU1XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQgKGUpIHtcclxuICAgIGlmICghX2dyYWJiZWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHdoaWNoTW91c2VCdXR0b24oZSkgPT09IDApIHtcclxuICAgICAgcmVsZWFzZSh7fSk7XHJcbiAgICAgIHJldHVybjsgLy8gd2hlbiB0ZXh0IGlzIHNlbGVjdGVkIG9uIGFuIGlucHV0IGFuZCB0aGVuIGRyYWdnZWQsIG1vdXNldXAgZG9lc24ndCBmaXJlLiB0aGlzIGlzIG91ciBvbmx5IGhvcGVcclxuICAgIH1cclxuXHJcbiAgICAvLyB0cnV0aHkgY2hlY2sgZml4ZXMgIzIzOSwgZXF1YWxpdHkgZml4ZXMgIzIwNywgZml4ZXMgIzUwMVxyXG4gICAgaWYgKChlLmNsaWVudFggIT09IHZvaWQgMCAmJiBNYXRoLmFicyhlLmNsaWVudFggLSBfbW92ZVgpIDw9IChvLnNsaWRlRmFjdG9yWCB8fCAwKSkgJiZcclxuICAgICAgKGUuY2xpZW50WSAhPT0gdm9pZCAwICYmIE1hdGguYWJzKGUuY2xpZW50WSAtIF9tb3ZlWSkgPD0gKG8uc2xpZGVGYWN0b3JZIHx8IDApKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uKSB7XHJcbiAgICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKSB8fCAwO1xyXG4gICAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSkgfHwgMDtcclxuICAgICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBkb2MuZWxlbWVudEZyb21Qb2ludChjbGllbnRYLCBjbGllbnRZKTtcclxuICAgICAgaWYgKGlzSW5wdXQoZWxlbWVudEJlaGluZEN1cnNvcikpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZ3JhYmJlZCA9IF9ncmFiYmVkOyAvLyBjYWxsIHRvIGVuZCgpIHVuc2V0cyBfZ3JhYmJlZFxyXG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XHJcbiAgICBtb3ZlbWVudHMoKTtcclxuICAgIGVuZCgpO1xyXG4gICAgc3RhcnQoZ3JhYmJlZCk7XHJcblxyXG4gICAgdmFyIG9mZnNldCA9IGdldE9mZnNldChfaXRlbSk7XHJcbiAgICBfb2Zmc2V0WCA9IGdldENvb3JkKCdwYWdlWCcsIGUpIC0gb2Zmc2V0LmxlZnQ7XHJcbiAgICBfb2Zmc2V0WSA9IGdldENvb3JkKCdwYWdlWScsIGUpIC0gb2Zmc2V0LnRvcDtcclxuXHJcbiAgICBjbGFzc2VzLmFkZChfY29weSB8fCBfaXRlbSwgJ2d1LXRyYW5zaXQnKTtcclxuICAgIHJlbmRlck1pcnJvckltYWdlKCk7XHJcbiAgICBkcmFnKGUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2FuU3RhcnQgKGl0ZW0pIHtcclxuICAgIGlmIChkcmFrZS5kcmFnZ2luZyAmJiBfbWlycm9yKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChpc0NvbnRhaW5lcihpdGVtKSkge1xyXG4gICAgICByZXR1cm47IC8vIGRvbid0IGRyYWcgY29udGFpbmVyIGl0c2VsZlxyXG4gICAgfVxyXG4gICAgdmFyIGhhbmRsZSA9IGl0ZW07XHJcbiAgICB3aGlsZSAoZ2V0UGFyZW50KGl0ZW0pICYmIGlzQ29udGFpbmVyKGdldFBhcmVudChpdGVtKSkgPT09IGZhbHNlKSB7XHJcbiAgICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpdGVtID0gZ2V0UGFyZW50KGl0ZW0pOyAvLyBkcmFnIHRhcmdldCBzaG91bGQgYmUgYSB0b3AgZWxlbWVudFxyXG4gICAgICBpZiAoIWl0ZW0pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHZhciBzb3VyY2UgPSBnZXRQYXJlbnQoaXRlbSk7XHJcbiAgICBpZiAoIXNvdXJjZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoby5pbnZhbGlkKGl0ZW0sIGhhbmRsZSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBtb3ZhYmxlID0gby5tb3ZlcyhpdGVtLCBzb3VyY2UsIGhhbmRsZSwgbmV4dEVsKGl0ZW0pKTtcclxuICAgIGlmICghbW92YWJsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXRlbTogaXRlbSxcclxuICAgICAgc291cmNlOiBzb3VyY2VcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjYW5Nb3ZlIChpdGVtKSB7XHJcbiAgICByZXR1cm4gISFjYW5TdGFydChpdGVtKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG1hbnVhbFN0YXJ0IChpdGVtKSB7XHJcbiAgICB2YXIgY29udGV4dCA9IGNhblN0YXJ0KGl0ZW0pO1xyXG4gICAgaWYgKGNvbnRleHQpIHtcclxuICAgICAgc3RhcnQoY29udGV4dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdGFydCAoY29udGV4dCkge1xyXG4gICAgaWYgKGlzQ29weShjb250ZXh0Lml0ZW0sIGNvbnRleHQuc291cmNlKSkge1xyXG4gICAgICBfY29weSA9IGNvbnRleHQuaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgIGRyYWtlLmVtaXQoJ2Nsb25lZCcsIF9jb3B5LCBjb250ZXh0Lml0ZW0sICdjb3B5Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NvdXJjZSA9IGNvbnRleHQuc291cmNlO1xyXG4gICAgX2l0ZW0gPSBjb250ZXh0Lml0ZW07XHJcbiAgICBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBuZXh0RWwoY29udGV4dC5pdGVtKTtcclxuXHJcbiAgICBkcmFrZS5kcmFnZ2luZyA9IHRydWU7XHJcbiAgICBkcmFrZS5lbWl0KCdkcmFnJywgX2l0ZW0sIF9zb3VyY2UpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaW52YWxpZFRhcmdldCAoKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBlbmQgKCkge1xyXG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xyXG4gICAgZHJvcChpdGVtLCBnZXRQYXJlbnQoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdW5ncmFiICgpIHtcclxuICAgIF9ncmFiYmVkID0gZmFsc2U7XHJcbiAgICBldmVudHVhbE1vdmVtZW50cyh0cnVlKTtcclxuICAgIG1vdmVtZW50cyh0cnVlKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbGVhc2UgKGUpIHtcclxuICAgIHVuZ3JhYigpO1xyXG5cclxuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcclxuICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKSB8fCAwO1xyXG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpIHx8IDA7XHJcbiAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGdldEVsZW1lbnRCZWhpbmRQb2ludChfbWlycm9yLCBjbGllbnRYLCBjbGllbnRZKTtcclxuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XHJcbiAgICBpZiAoZHJvcFRhcmdldCAmJiAoKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UpIHx8ICghX2NvcHkgfHwgZHJvcFRhcmdldCAhPT0gX3NvdXJjZSkpKSB7XHJcbiAgICAgIGRyb3AoaXRlbSwgZHJvcFRhcmdldCk7XHJcbiAgICB9IGVsc2UgaWYgKG8ucmVtb3ZlT25TcGlsbCkge1xyXG4gICAgICByZW1vdmUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhbmNlbCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZHJvcCAoaXRlbSwgdGFyZ2V0KSB7XHJcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xyXG4gICAgaWYgKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UgJiYgdGFyZ2V0ID09PSBfc291cmNlKSB7XHJcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChfaXRlbSk7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCkpIHtcclxuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgdGFyZ2V0LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xyXG4gICAgfVxyXG4gICAgY2xlYW51cCgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlICgpIHtcclxuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcclxuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XHJcbiAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcclxuICAgIH1cclxuICAgIGRyYWtlLmVtaXQoX2NvcHkgPyAnY2FuY2VsJyA6ICdyZW1vdmUnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UpO1xyXG4gICAgY2xlYW51cCgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2FuY2VsIChyZXZlcnQpIHtcclxuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHJldmVydHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCA/IHJldmVydCA6IG8ucmV2ZXJ0T25TcGlsbDtcclxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XHJcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xyXG4gICAgdmFyIGluaXRpYWwgPSBpc0luaXRpYWxQbGFjZW1lbnQocGFyZW50KTtcclxuICAgIGlmIChpbml0aWFsID09PSBmYWxzZSAmJiByZXZlcnRzKSB7XHJcbiAgICAgIGlmIChfY29weSkge1xyXG4gICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChfY29weSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIF9zb3VyY2UuaW5zZXJ0QmVmb3JlKGl0ZW0sIF9pbml0aWFsU2libGluZyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbml0aWFsIHx8IHJldmVydHMpIHtcclxuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgcGFyZW50LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xyXG4gICAgfVxyXG4gICAgY2xlYW51cCgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2xlYW51cCAoKSB7XHJcbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xyXG4gICAgdW5ncmFiKCk7XHJcbiAgICByZW1vdmVNaXJyb3JJbWFnZSgpO1xyXG4gICAgaWYgKGl0ZW0pIHtcclxuICAgICAgY2xhc3Nlcy5ybShpdGVtLCAnZ3UtdHJhbnNpdCcpO1xyXG4gICAgfVxyXG4gICAgaWYgKF9yZW5kZXJUaW1lcikge1xyXG4gICAgICBjbGVhclRpbWVvdXQoX3JlbmRlclRpbWVyKTtcclxuICAgIH1cclxuICAgIGRyYWtlLmRyYWdnaW5nID0gZmFsc2U7XHJcbiAgICBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7XHJcbiAgICAgIGRyYWtlLmVtaXQoJ291dCcsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7XHJcbiAgICB9XHJcbiAgICBkcmFrZS5lbWl0KCdkcmFnZW5kJywgaXRlbSk7XHJcbiAgICBfc291cmNlID0gX2l0ZW0gPSBfY29weSA9IF9pbml0aWFsU2libGluZyA9IF9jdXJyZW50U2libGluZyA9IF9yZW5kZXJUaW1lciA9IF9sYXN0RHJvcFRhcmdldCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc0luaXRpYWxQbGFjZW1lbnQgKHRhcmdldCwgcykge1xyXG4gICAgdmFyIHNpYmxpbmc7XHJcbiAgICBpZiAocyAhPT0gdm9pZCAwKSB7XHJcbiAgICAgIHNpYmxpbmcgPSBzO1xyXG4gICAgfSBlbHNlIGlmIChfbWlycm9yKSB7XHJcbiAgICAgIHNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzaWJsaW5nID0gbmV4dEVsKF9jb3B5IHx8IF9pdGVtKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQgPT09IF9zb3VyY2UgJiYgc2libGluZyA9PT0gX2luaXRpYWxTaWJsaW5nO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZmluZERyb3BUYXJnZXQgKGVsZW1lbnRCZWhpbmRDdXJzb3IsIGNsaWVudFgsIGNsaWVudFkpIHtcclxuICAgIHZhciB0YXJnZXQgPSBlbGVtZW50QmVoaW5kQ3Vyc29yO1xyXG4gICAgd2hpbGUgKHRhcmdldCAmJiAhYWNjZXB0ZWQoKSkge1xyXG4gICAgICB0YXJnZXQgPSBnZXRQYXJlbnQodGFyZ2V0KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcblxyXG4gICAgZnVuY3Rpb24gYWNjZXB0ZWQgKCkge1xyXG4gICAgICB2YXIgZHJvcHBhYmxlID0gaXNDb250YWluZXIodGFyZ2V0KTtcclxuICAgICAgaWYgKGRyb3BwYWJsZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZCh0YXJnZXQsIGVsZW1lbnRCZWhpbmRDdXJzb3IpO1xyXG4gICAgICB2YXIgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKHRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcclxuICAgICAgdmFyIGluaXRpYWwgPSBpc0luaXRpYWxQbGFjZW1lbnQodGFyZ2V0LCByZWZlcmVuY2UpO1xyXG4gICAgICBpZiAoaW5pdGlhbCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBzaG91bGQgYWx3YXlzIGJlIGFibGUgdG8gZHJvcCBpdCByaWdodCBiYWNrIHdoZXJlIGl0IHdhc1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBvLmFjY2VwdHMoX2l0ZW0sIHRhcmdldCwgX3NvdXJjZSwgcmVmZXJlbmNlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRyYWcgKGUpIHtcclxuICAgIGlmICghX21pcnJvcikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpIHx8IDA7XHJcbiAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSkgfHwgMDtcclxuICAgIHZhciB4ID0gY2xpZW50WCAtIF9vZmZzZXRYO1xyXG4gICAgdmFyIHkgPSBjbGllbnRZIC0gX29mZnNldFk7XHJcblxyXG4gICAgX21pcnJvci5zdHlsZS5sZWZ0ID0geCArICdweCc7XHJcbiAgICBfbWlycm9yLnN0eWxlLnRvcCA9IHkgKyAncHgnO1xyXG5cclxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XHJcbiAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGdldEVsZW1lbnRCZWhpbmRQb2ludChfbWlycm9yLCBjbGllbnRYLCBjbGllbnRZKTtcclxuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XHJcbiAgICB2YXIgY2hhbmdlZCA9IGRyb3BUYXJnZXQgIT09IG51bGwgJiYgZHJvcFRhcmdldCAhPT0gX2xhc3REcm9wVGFyZ2V0O1xyXG4gICAgaWYgKGNoYW5nZWQgfHwgZHJvcFRhcmdldCA9PT0gbnVsbCkge1xyXG4gICAgICBvdXQoKTtcclxuICAgICAgX2xhc3REcm9wVGFyZ2V0ID0gZHJvcFRhcmdldDtcclxuICAgICAgb3ZlcigpO1xyXG4gICAgfVxyXG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcclxuICAgIGlmIChkcm9wVGFyZ2V0ID09PSBfc291cmNlICYmIF9jb3B5ICYmICFvLmNvcHlTb3J0U291cmNlKSB7XHJcbiAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHJlZmVyZW5jZTtcclxuICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZChkcm9wVGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcclxuICAgIGlmIChpbW1lZGlhdGUgIT09IG51bGwpIHtcclxuICAgICAgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKGRyb3BUYXJnZXQsIGltbWVkaWF0ZSwgY2xpZW50WCwgY2xpZW50WSk7XHJcbiAgICB9IGVsc2UgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdHJ1ZSAmJiAhX2NvcHkpIHtcclxuICAgICAgcmVmZXJlbmNlID0gX2luaXRpYWxTaWJsaW5nO1xyXG4gICAgICBkcm9wVGFyZ2V0ID0gX3NvdXJjZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChfY29weSAmJiBwYXJlbnQpIHtcclxuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICAocmVmZXJlbmNlID09PSBudWxsICYmIGNoYW5nZWQpIHx8XHJcbiAgICAgIHJlZmVyZW5jZSAhPT0gaXRlbSAmJlxyXG4gICAgICByZWZlcmVuY2UgIT09IG5leHRFbChpdGVtKVxyXG4gICAgKSB7XHJcbiAgICAgIF9jdXJyZW50U2libGluZyA9IHJlZmVyZW5jZTtcclxuICAgICAgZHJvcFRhcmdldC5pbnNlcnRCZWZvcmUoaXRlbSwgcmVmZXJlbmNlKTtcclxuICAgICAgZHJha2UuZW1pdCgnc2hhZG93JywgaXRlbSwgZHJvcFRhcmdldCwgX3NvdXJjZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBtb3ZlZCAodHlwZSkgeyBkcmFrZS5lbWl0KHR5cGUsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7IH1cclxuICAgIGZ1bmN0aW9uIG92ZXIgKCkgeyBpZiAoY2hhbmdlZCkgeyBtb3ZlZCgnb3ZlcicpOyB9IH1cclxuICAgIGZ1bmN0aW9uIG91dCAoKSB7IGlmIChfbGFzdERyb3BUYXJnZXQpIHsgbW92ZWQoJ291dCcpOyB9IH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNwaWxsT3ZlciAoZWwpIHtcclxuICAgIGNsYXNzZXMucm0oZWwsICdndS1oaWRlJyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzcGlsbE91dCAoZWwpIHtcclxuICAgIGlmIChkcmFrZS5kcmFnZ2luZykgeyBjbGFzc2VzLmFkZChlbCwgJ2d1LWhpZGUnKTsgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyTWlycm9ySW1hZ2UgKCkge1xyXG4gICAgaWYgKF9taXJyb3IpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHJlY3QgPSBfaXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIF9taXJyb3IgPSBfaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBfbWlycm9yLnN0eWxlLndpZHRoID0gZ2V0UmVjdFdpZHRoKHJlY3QpICsgJ3B4JztcclxuICAgIF9taXJyb3Iuc3R5bGUuaGVpZ2h0ID0gZ2V0UmVjdEhlaWdodChyZWN0KSArICdweCc7XHJcbiAgICBjbGFzc2VzLnJtKF9taXJyb3IsICdndS10cmFuc2l0Jyk7XHJcbiAgICBjbGFzc2VzLmFkZChfbWlycm9yLCAnZ3UtbWlycm9yJyk7XHJcbiAgICBvLm1pcnJvckNvbnRhaW5lci5hcHBlbmRDaGlsZChfbWlycm9yKTtcclxuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdhZGQnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XHJcbiAgICBjbGFzc2VzLmFkZChvLm1pcnJvckNvbnRhaW5lciwgJ2d1LXVuc2VsZWN0YWJsZScpO1xyXG4gICAgZHJha2UuZW1pdCgnY2xvbmVkJywgX21pcnJvciwgX2l0ZW0sICdtaXJyb3InKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZU1pcnJvckltYWdlICgpIHtcclxuICAgIGlmIChfbWlycm9yKSB7XHJcbiAgICAgIGNsYXNzZXMucm0oby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcclxuICAgICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgJ3JlbW92ZScsICdtb3VzZW1vdmUnLCBkcmFnKTtcclxuICAgICAgZ2V0UGFyZW50KF9taXJyb3IpLnJlbW92ZUNoaWxkKF9taXJyb3IpO1xyXG4gICAgICBfbWlycm9yID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldEltbWVkaWF0ZUNoaWxkIChkcm9wVGFyZ2V0LCB0YXJnZXQpIHtcclxuICAgIHZhciBpbW1lZGlhdGUgPSB0YXJnZXQ7XHJcbiAgICB3aGlsZSAoaW1tZWRpYXRlICE9PSBkcm9wVGFyZ2V0ICYmIGdldFBhcmVudChpbW1lZGlhdGUpICE9PSBkcm9wVGFyZ2V0KSB7XHJcbiAgICAgIGltbWVkaWF0ZSA9IGdldFBhcmVudChpbW1lZGlhdGUpO1xyXG4gICAgfVxyXG4gICAgaWYgKGltbWVkaWF0ZSA9PT0gZG9jdW1lbnRFbGVtZW50KSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGltbWVkaWF0ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldFJlZmVyZW5jZSAoZHJvcFRhcmdldCwgdGFyZ2V0LCB4LCB5KSB7XHJcbiAgICB2YXIgaG9yaXpvbnRhbCA9IG8uZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCc7XHJcbiAgICB2YXIgcmVmZXJlbmNlID0gdGFyZ2V0ICE9PSBkcm9wVGFyZ2V0ID8gaW5zaWRlKCkgOiBvdXRzaWRlKCk7XHJcbiAgICByZXR1cm4gcmVmZXJlbmNlO1xyXG5cclxuICAgIGZ1bmN0aW9uIG91dHNpZGUgKCkgeyAvLyBzbG93ZXIsIGJ1dCBhYmxlIHRvIGZpZ3VyZSBvdXQgYW55IHBvc2l0aW9uXHJcbiAgICAgIHZhciBsZW4gPSBkcm9wVGFyZ2V0LmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgdmFyIGk7XHJcbiAgICAgIHZhciBlbDtcclxuICAgICAgdmFyIHJlY3Q7XHJcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgIGVsID0gZHJvcFRhcmdldC5jaGlsZHJlbltpXTtcclxuICAgICAgICByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgaWYgKGhvcml6b250YWwgJiYgKHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyKSA+IHgpIHsgcmV0dXJuIGVsOyB9XHJcbiAgICAgICAgaWYgKCFob3Jpem9udGFsICYmIChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMikgPiB5KSB7IHJldHVybiBlbDsgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluc2lkZSAoKSB7IC8vIGZhc3RlciwgYnV0IG9ubHkgYXZhaWxhYmxlIGlmIGRyb3BwZWQgaW5zaWRlIGEgY2hpbGQgZWxlbWVudFxyXG4gICAgICB2YXIgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgaWYgKGhvcml6b250YWwpIHtcclxuICAgICAgICByZXR1cm4gcmVzb2x2ZSh4ID4gcmVjdC5sZWZ0ICsgZ2V0UmVjdFdpZHRoKHJlY3QpIC8gMik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc29sdmUoeSA+IHJlY3QudG9wICsgZ2V0UmVjdEhlaWdodChyZWN0KSAvIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlc29sdmUgKGFmdGVyKSB7XHJcbiAgICAgIHJldHVybiBhZnRlciA/IG5leHRFbCh0YXJnZXQpIDogdGFyZ2V0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaXNDb3B5IChpdGVtLCBjb250YWluZXIpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygby5jb3B5ID09PSAnYm9vbGVhbicgPyBvLmNvcHkgOiBvLmNvcHkoaXRlbSwgY29udGFpbmVyKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvdWNoeSAoZWwsIG9wLCB0eXBlLCBmbikge1xyXG4gIHZhciB0b3VjaCA9IHtcclxuICAgIG1vdXNldXA6ICd0b3VjaGVuZCcsXHJcbiAgICBtb3VzZWRvd246ICd0b3VjaHN0YXJ0JyxcclxuICAgIG1vdXNlbW92ZTogJ3RvdWNobW92ZSdcclxuICB9O1xyXG4gIHZhciBwb2ludGVycyA9IHtcclxuICAgIG1vdXNldXA6ICdwb2ludGVydXAnLFxyXG4gICAgbW91c2Vkb3duOiAncG9pbnRlcmRvd24nLFxyXG4gICAgbW91c2Vtb3ZlOiAncG9pbnRlcm1vdmUnXHJcbiAgfTtcclxuICB2YXIgbWljcm9zb2Z0ID0ge1xyXG4gICAgbW91c2V1cDogJ01TUG9pbnRlclVwJyxcclxuICAgIG1vdXNlZG93bjogJ01TUG9pbnRlckRvd24nLFxyXG4gICAgbW91c2Vtb3ZlOiAnTVNQb2ludGVyTW92ZSdcclxuICB9O1xyXG4gIGlmIChnbG9iYWwubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKSB7XHJcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBwb2ludGVyc1t0eXBlXSwgZm4pO1xyXG4gIH0gZWxzZSBpZiAoZ2xvYmFsLm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSB7XHJcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBtaWNyb3NvZnRbdHlwZV0sIGZuKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY3Jvc3N2ZW50W29wXShlbCwgdG91Y2hbdHlwZV0sIGZuKTtcclxuICAgIGNyb3NzdmVudFtvcF0oZWwsIHR5cGUsIGZuKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdoaWNoTW91c2VCdXR0b24gKGUpIHtcclxuICBpZiAoZS50b3VjaGVzICE9PSB2b2lkIDApIHsgcmV0dXJuIGUudG91Y2hlcy5sZW5ndGg7IH1cclxuICBpZiAoZS53aGljaCAhPT0gdm9pZCAwICYmIGUud2hpY2ggIT09IDApIHsgcmV0dXJuIGUud2hpY2g7IH0gLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yNjFcclxuICBpZiAoZS5idXR0b25zICE9PSB2b2lkIDApIHsgcmV0dXJuIGUuYnV0dG9uczsgfVxyXG4gIHZhciBidXR0b24gPSBlLmJ1dHRvbjtcclxuICBpZiAoYnV0dG9uICE9PSB2b2lkIDApIHsgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2Jsb2IvOTllOGZmMWJhYTdhZTM0MWU5NGJiODljM2U4NDU3MGM3YzNhZDllYS9zcmMvZXZlbnQuanMjTDU3My1MNTc1XHJcbiAgICByZXR1cm4gYnV0dG9uICYgMSA/IDEgOiBidXR0b24gJiAyID8gMyA6IChidXR0b24gJiA0ID8gMiA6IDApO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0T2Zmc2V0IChlbCkge1xyXG4gIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgcmV0dXJuIHtcclxuICAgIGxlZnQ6IHJlY3QubGVmdCArIGdldFNjcm9sbCgnc2Nyb2xsTGVmdCcsICdwYWdlWE9mZnNldCcpLFxyXG4gICAgdG9wOiByZWN0LnRvcCArIGdldFNjcm9sbCgnc2Nyb2xsVG9wJywgJ3BhZ2VZT2Zmc2V0JylcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTY3JvbGwgKHNjcm9sbFByb3AsIG9mZnNldFByb3ApIHtcclxuICBpZiAodHlwZW9mIGdsb2JhbFtvZmZzZXRQcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHJldHVybiBnbG9iYWxbb2Zmc2V0UHJvcF07XHJcbiAgfVxyXG4gIGlmIChkb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRFbGVtZW50W3Njcm9sbFByb3BdO1xyXG4gIH1cclxuICByZXR1cm4gZG9jLmJvZHlbc2Nyb2xsUHJvcF07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEVsZW1lbnRCZWhpbmRQb2ludCAocG9pbnQsIHgsIHkpIHtcclxuICBwb2ludCA9IHBvaW50IHx8IHt9O1xyXG4gIHZhciBzdGF0ZSA9IHBvaW50LmNsYXNzTmFtZSB8fCAnJztcclxuICB2YXIgZWw7XHJcbiAgcG9pbnQuY2xhc3NOYW1lICs9ICcgZ3UtaGlkZSc7XHJcbiAgZWwgPSBkb2MuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcclxuICBwb2ludC5jbGFzc05hbWUgPSBzdGF0ZTtcclxuICByZXR1cm4gZWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5ldmVyICgpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbmZ1bmN0aW9uIGFsd2F5cyAoKSB7IHJldHVybiB0cnVlOyB9XHJcbmZ1bmN0aW9uIGdldFJlY3RXaWR0aCAocmVjdCkgeyByZXR1cm4gcmVjdC53aWR0aCB8fCAocmVjdC5yaWdodCAtIHJlY3QubGVmdCk7IH1cclxuZnVuY3Rpb24gZ2V0UmVjdEhlaWdodCAocmVjdCkgeyByZXR1cm4gcmVjdC5oZWlnaHQgfHwgKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApOyB9XHJcbmZ1bmN0aW9uIGdldFBhcmVudCAoZWwpIHsgcmV0dXJuIGVsLnBhcmVudE5vZGUgPT09IGRvYyA/IG51bGwgOiBlbC5wYXJlbnROb2RlOyB9XHJcbmZ1bmN0aW9uIGlzSW5wdXQgKGVsKSB7IHJldHVybiBlbC50YWdOYW1lID09PSAnSU5QVVQnIHx8IGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgfHwgZWwudGFnTmFtZSA9PT0gJ1NFTEVDVCcgfHwgaXNFZGl0YWJsZShlbCk7IH1cclxuZnVuY3Rpb24gaXNFZGl0YWJsZSAoZWwpIHtcclxuICBpZiAoIWVsKSB7IHJldHVybiBmYWxzZTsgfSAvLyBubyBwYXJlbnRzIHdlcmUgZWRpdGFibGVcclxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAnZmFsc2UnKSB7IHJldHVybiBmYWxzZTsgfSAvLyBzdG9wIHRoZSBsb29rdXBcclxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHsgcmV0dXJuIHRydWU7IH0gLy8gZm91bmQgYSBjb250ZW50RWRpdGFibGUgZWxlbWVudCBpbiB0aGUgY2hhaW5cclxuICByZXR1cm4gaXNFZGl0YWJsZShnZXRQYXJlbnQoZWwpKTsgLy8gY29udGVudEVkaXRhYmxlIGlzIHNldCB0byAnaW5oZXJpdCdcclxufVxyXG5cclxuZnVuY3Rpb24gbmV4dEVsIChlbCkge1xyXG4gIHJldHVybiBlbC5uZXh0RWxlbWVudFNpYmxpbmcgfHwgbWFudWFsbHkoKTtcclxuICBmdW5jdGlvbiBtYW51YWxseSAoKSB7XHJcbiAgICB2YXIgc2libGluZyA9IGVsO1xyXG4gICAgZG8ge1xyXG4gICAgICBzaWJsaW5nID0gc2libGluZy5uZXh0U2libGluZztcclxuICAgIH0gd2hpbGUgKHNpYmxpbmcgJiYgc2libGluZy5ub2RlVHlwZSAhPT0gMSk7XHJcbiAgICByZXR1cm4gc2libGluZztcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEV2ZW50SG9zdCAoZSkge1xyXG4gIC8vIG9uIHRvdWNoZW5kIGV2ZW50LCB3ZSBoYXZlIHRvIHVzZSBgZS5jaGFuZ2VkVG91Y2hlc2BcclxuICAvLyBzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83MTkyNTYzL3RvdWNoZW5kLWV2ZW50LXByb3BlcnRpZXNcclxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzM0XHJcbiAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XHJcbiAgICByZXR1cm4gZS50YXJnZXRUb3VjaGVzWzBdO1xyXG4gIH1cclxuICBpZiAoZS5jaGFuZ2VkVG91Y2hlcyAmJiBlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aCkge1xyXG4gICAgcmV0dXJuIGUuY2hhbmdlZFRvdWNoZXNbMF07XHJcbiAgfVxyXG4gIHJldHVybiBlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDb29yZCAoY29vcmQsIGUpIHtcclxuICB2YXIgaG9zdCA9IGdldEV2ZW50SG9zdChlKTtcclxuICB2YXIgbWlzc01hcCA9IHtcclxuICAgIHBhZ2VYOiAnY2xpZW50WCcsIC8vIElFOFxyXG4gICAgcGFnZVk6ICdjbGllbnRZJyAvLyBJRThcclxuICB9O1xyXG4gIGlmIChjb29yZCBpbiBtaXNzTWFwICYmICEoY29vcmQgaW4gaG9zdCkgJiYgbWlzc01hcFtjb29yZF0gaW4gaG9zdCkge1xyXG4gICAgY29vcmQgPSBtaXNzTWFwW2Nvb3JkXTtcclxuICB9XHJcbiAgcmV0dXJuIGhvc3RbY29vcmRdO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGRyYWd1bGE7XHJcblxyXG59KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXHJcbn0se1wiLi9jbGFzc2VzXCI6OCxcImNvbnRyYS9lbWl0dGVyXCI6NCxcImNyb3NzdmVudFwiOjV9XSwxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XHJcbi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XHJcblxyXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcclxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXHJcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcclxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cclxuXHJcbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xyXG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xyXG5cclxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xyXG59XHJcbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcclxufVxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcclxuICAgIH1cclxufSAoKSlcclxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcclxuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XHJcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXHJcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcclxuICAgIH1cclxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXHJcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcclxuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcclxuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXHJcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcclxuICAgIH0gY2F0Y2goZSl7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XHJcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcclxuICAgICAgICB9IGNhdGNoKGUpe1xyXG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxyXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xyXG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XHJcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXHJcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxyXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XHJcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xyXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xyXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcclxuICAgIH0gY2F0Y2ggKGUpe1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XHJcbiAgICAgICAgfSBjYXRjaCAoZSl7XHJcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxyXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XHJcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxufVxyXG52YXIgcXVldWUgPSBbXTtcclxudmFyIGRyYWluaW5nID0gZmFsc2U7XHJcbnZhciBjdXJyZW50UXVldWU7XHJcbnZhciBxdWV1ZUluZGV4ID0gLTE7XHJcblxyXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XHJcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xyXG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XHJcbiAgICB9XHJcbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xyXG4gICAgaWYgKGRyYWluaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XHJcbiAgICBkcmFpbmluZyA9IHRydWU7XHJcblxyXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcclxuICAgIHdoaWxlKGxlbikge1xyXG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xyXG4gICAgICAgIHF1ZXVlID0gW107XHJcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xyXG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcclxuICAgIH1cclxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XHJcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xyXG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG59XHJcblxyXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xyXG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcclxuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XHJcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcclxuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XHJcbiAgICB0aGlzLmZ1biA9IGZ1bjtcclxuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcclxufVxyXG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcclxufTtcclxucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcclxucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcclxucHJvY2Vzcy5lbnYgPSB7fTtcclxucHJvY2Vzcy5hcmd2ID0gW107XHJcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xyXG5wcm9jZXNzLnZlcnNpb25zID0ge307XHJcblxyXG5mdW5jdGlvbiBub29wKCkge31cclxuXHJcbnByb2Nlc3Mub24gPSBub29wO1xyXG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcclxucHJvY2Vzcy5vbmNlID0gbm9vcDtcclxucHJvY2Vzcy5vZmYgPSBub29wO1xyXG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcclxucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xyXG5wcm9jZXNzLmVtaXQgPSBub29wO1xyXG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XHJcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XHJcblxyXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XHJcblxyXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xyXG59O1xyXG5cclxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcclxucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XHJcbn07XHJcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XHJcblxyXG59LHt9XSwxMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XHJcbihmdW5jdGlvbiAoc2V0SW1tZWRpYXRlKXsoZnVuY3Rpb24gKCl7XHJcbnZhciBzaSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicsIHRpY2s7XHJcbmlmIChzaSkge1xyXG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0SW1tZWRpYXRlKGZuKTsgfTtcclxufSBlbHNlIHtcclxuICB0aWNrID0gZnVuY3Rpb24gKGZuKSB7IHNldFRpbWVvdXQoZm4sIDApOyB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHRpY2s7XHJcbn0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMscmVxdWlyZShcInRpbWVyc1wiKS5zZXRJbW1lZGlhdGUpXHJcbn0se1widGltZXJzXCI6MTJ9XSwxMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XHJcbihmdW5jdGlvbiAoc2V0SW1tZWRpYXRlLGNsZWFySW1tZWRpYXRlKXsoZnVuY3Rpb24gKCl7XHJcbnZhciBuZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MvYnJvd3Nlci5qcycpLm5leHRUaWNrO1xyXG52YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XHJcbnZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcclxudmFyIGltbWVkaWF0ZUlkcyA9IHt9O1xyXG52YXIgbmV4dEltbWVkaWF0ZUlkID0gMDtcclxuXHJcbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXHJcblxyXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XHJcbn07XHJcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcclxufTtcclxuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxyXG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7IHRpbWVvdXQuY2xvc2UoKTsgfTtcclxuXHJcbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcclxuICB0aGlzLl9pZCA9IGlkO1xyXG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xyXG59XHJcblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcclxuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XHJcbn07XHJcblxyXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cclxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xyXG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcclxuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xyXG59O1xyXG5cclxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcclxuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XHJcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcclxufTtcclxuXHJcbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XHJcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xyXG5cclxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcclxuICBpZiAobXNlY3MgPj0gMCkge1xyXG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xyXG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxyXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xyXG4gICAgfSwgbXNlY3MpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFRoYXQncyBub3QgaG93IG5vZGUuanMgaW1wbGVtZW50cyBpdCBidXQgdGhlIGV4cG9zZWQgYXBpIGlzIHRoZSBzYW1lLlxyXG5leHBvcnRzLnNldEltbWVkaWF0ZSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHNldEltbWVkaWF0ZSA6IGZ1bmN0aW9uKGZuKSB7XHJcbiAgdmFyIGlkID0gbmV4dEltbWVkaWF0ZUlkKys7XHJcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IGZhbHNlIDogc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xyXG5cclxuICBpbW1lZGlhdGVJZHNbaWRdID0gdHJ1ZTtcclxuXHJcbiAgbmV4dFRpY2soZnVuY3Rpb24gb25OZXh0VGljaygpIHtcclxuICAgIGlmIChpbW1lZGlhdGVJZHNbaWRdKSB7XHJcbiAgICAgIC8vIGZuLmNhbGwoKSBpcyBmYXN0ZXIgc28gd2Ugb3B0aW1pemUgZm9yIHRoZSBjb21tb24gdXNlLWNhc2VcclxuICAgICAgLy8gQHNlZSBodHRwOi8vanNwZXJmLmNvbS9jYWxsLWFwcGx5LXNlZ3VcclxuICAgICAgaWYgKGFyZ3MpIHtcclxuICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmbi5jYWxsKG51bGwpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIFByZXZlbnQgaWRzIGZyb20gbGVha2luZ1xyXG4gICAgICBleHBvcnRzLmNsZWFySW1tZWRpYXRlKGlkKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGlkO1xyXG59O1xyXG5cclxuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IHR5cGVvZiBjbGVhckltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiID8gY2xlYXJJbW1lZGlhdGUgOiBmdW5jdGlvbihpZCkge1xyXG4gIGRlbGV0ZSBpbW1lZGlhdGVJZHNbaWRdO1xyXG59O1xyXG59KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHJlcXVpcmUoXCJ0aW1lcnNcIikuc2V0SW1tZWRpYXRlLHJlcXVpcmUoXCJ0aW1lcnNcIikuY2xlYXJJbW1lZGlhdGUpXHJcbn0se1wicHJvY2Vzcy9icm93c2VyLmpzXCI6MTAsXCJ0aW1lcnNcIjoxMn1dfSx7fSxbMV0pO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/jkanban/dist/jkanban.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./resources/assets/core/plugins/custom/jkanban/jkanban.js");
/******/ 	
/******/ })()
;